<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Java IO 流 | 代码狗的小屋</title><meta name="author" content="Code Dog"><meta name="copyright" content="Code Dog"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="IO 流IO 流是 Java 中用于处理输入和输出操作的核心概念。Java 提供了丰富的 IO 类库，支持文件操作、网络通信等多种场景。 分类按照流的方向可以分为：输入流和输出流。输入流用于读取数据，输出流用于写入数据。 按照流的数据类型可以分为：字节流和字符流。字节流可以处理所有类型的数据，而字符流专门用于处理文本数据。 字节流字节流是 Java 中用于处理字节数据的核心概念。字节流可以处理所有">
<meta property="og:type" content="article">
<meta property="og:title" content="Java IO 流">
<meta property="og:url" content="https://codedog1024.github.io/2025/10/18/Java25/index.html">
<meta property="og:site_name" content="代码狗的小屋">
<meta property="og:description" content="IO 流IO 流是 Java 中用于处理输入和输出操作的核心概念。Java 提供了丰富的 IO 类库，支持文件操作、网络通信等多种场景。 分类按照流的方向可以分为：输入流和输出流。输入流用于读取数据，输出流用于写入数据。 按照流的数据类型可以分为：字节流和字符流。字节流可以处理所有类型的数据，而字符流专门用于处理文本数据。 字节流字节流是 Java 中用于处理字节数据的核心概念。字节流可以处理所有">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://codedog1024.github.io/img/06.jpg">
<meta property="article:published_time" content="2025-10-18T13:14:13.000Z">
<meta property="article:modified_time" content="2025-10-24T11:57:46.805Z">
<meta property="article:author" content="Code Dog">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://codedog1024.github.io/img/06.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Java IO 流",
  "url": "https://codedog1024.github.io/2025/10/18/Java25/",
  "image": "https://codedog1024.github.io/img/06.jpg",
  "datePublished": "2025-10-18T13:14:13.000Z",
  "dateModified": "2025-10-24T11:57:46.805Z",
  "author": [
    {
      "@type": "Person",
      "name": "Code Dog",
      "url": "https://codedog1024.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://codedog1024.github.io/2025/10/18/Java25/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 1
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java IO 流',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/06.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">代码狗的小屋</span></a><a class="nav-page-title" href="/"><span class="site-name">Java IO 流</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Java IO 流</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-10-18T13:14:13.000Z" title="发表于 2025-10-18 21:14:13">2025-10-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-10-24T11:57:46.805Z" title="更新于 2025-10-24 19:57:46">2025-10-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="IO-流"><a href="#IO-流" class="headerlink" title="IO 流"></a>IO 流</h2><p>IO 流是 Java 中用于处理输入和输出操作的核心概念。Java 提供了丰富的 IO 类库，支持文件操作、网络通信等多种场景。</p>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p>按照流的方向可以分为：<code>输入流</code>和<code>输出流</code>。输入流用于读取数据，输出流用于写入数据。</p>
<p>按照流的数据类型可以分为：<code>字节流</code>和<code>字符流</code>。字节流可以处理所有类型的数据，而字符流专门用于处理文本数据。</p>
<h2 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h2><p>字节流是 Java 中用于处理字节数据的核心概念。字节流可以处理所有类型的数据，如图片、音频、视频等。字节流提供了一系列方法，用于读取、写入和操作字节数据。</p>
<p>字节流提供了两个接口：<code>InputStream</code>和<code>OutputStream</code>。<code>InputStream</code>用于读取字节数据，<code>OutputStream</code>用于写入字节数据。但是我们不需要直接使用这两个接口，而是使用它们的子类。分别是：<code>FileInputStream</code>和<code>FileOutputStream</code>。</p>
<h2 id="FileOutputStream"><a href="#FileOutputStream" class="headerlink" title="FileOutputStream"></a>FileOutputStream</h2><h3 id="FileOutputStream-构造方法"><a href="#FileOutputStream-构造方法" class="headerlink" title="FileOutputStream 构造方法"></a>FileOutputStream 构造方法</h3><table>
<thead>
<tr>
<th align="left">构造方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">FileOutputStream(File file)</td>
<td align="left">通过文件对象创建一个字节输出流</td>
</tr>
<tr>
<td align="left">FileOutputStream(String name)</td>
<td align="left">通过文件路径创建一个字节输出流</td>
</tr>
<tr>
<td align="left">FileOutputStream(File file, boolean append)</td>
<td align="left">通过文件对象创建一个字节输出流，第二个参数为 true 则追加内容</td>
</tr>
<tr>
<td align="left">FileOutputStream(String name, boolean append)</td>
<td align="left">通过文件路径创建一个字节输出流，第二个参数为 true 则追加内容</td>
</tr>
</tbody></table>
<h3 id="FileOutputStream-常用方法"><a href="#FileOutputStream-常用方法" class="headerlink" title="FileOutputStream 常用方法"></a>FileOutputStream 常用方法</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">write(int b)</td>
<td align="left">写入一个字节</td>
</tr>
<tr>
<td align="left">write(byte[] b)</td>
<td align="left">写入字节数组</td>
</tr>
<tr>
<td align="left">write(byte[] b, int off, int len)</td>
<td align="left">写入字节数组的一部分</td>
</tr>
<tr>
<td align="left">close()</td>
<td align="left">关闭输出流，释放资源</td>
</tr>
<tr>
<td align="left">getChannel()</td>
<td align="left">获取与此输出流关联的文件通道</td>
</tr>
<tr>
<td align="left">getFD()</td>
<td align="left">获取此输出流的文件描述符对象</td>
</tr>
<tr>
<td align="left">nullOutputStream()</td>
<td align="left">返回一个空输出流，用于忽略输出</td>
</tr>
<tr>
<td align="left">flush()</td>
<td align="left">刷新输出流，将缓冲区的数据写入目标</td>
</tr>
</tbody></table>
<h3 id="FileOutputStream-示例代码"><a href="#FileOutputStream-示例代码" class="headerlink" title="FileOutputStream 示例代码"></a>FileOutputStream 示例代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建文件对象，如果文件不存在则创建新文件，如果文件存在，新写入的内容会覆盖原有内容</span></span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="comment">// 与文件之间建立输出流</span></span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line"><span class="comment">// 传入的参数必须是字节</span></span><br><span class="line">fileOutputStream.write(<span class="string">&quot;ABC&quot;</span>.getBytes());</span><br><span class="line"><span class="comment">// 关闭资源</span></span><br><span class="line">fileOutputStream.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="comment">// 与文件之间建立输出流，第二个参数为 true 则追加内容</span></span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 传入的参数必须是字节</span></span><br><span class="line">fileOutputStream.write(<span class="string">&quot;ABC&quot;</span>.getBytes());</span><br><span class="line"><span class="comment">// 关闭资源</span></span><br><span class="line">fileOutputStream.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="comment">// 与文件之间建立输出流</span></span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line"><span class="comment">// 传入的参数必须是字节，可以使用换行符实现换行</span></span><br><span class="line">fileOutputStream.write(<span class="string">&quot;ABC\r\nDEF&quot;</span>.getBytes());</span><br><span class="line"><span class="comment">// 关闭资源</span></span><br><span class="line">fileOutputStream.close();</span><br></pre></td></tr></table></figure>

<h2 id="FileInputStream"><a href="#FileInputStream" class="headerlink" title="FileInputStream"></a>FileInputStream</h2><h3 id="FileInputStream-构造方法"><a href="#FileInputStream-构造方法" class="headerlink" title="FileInputStream 构造方法"></a>FileInputStream 构造方法</h3><table>
<thead>
<tr>
<th>构造方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>FileInputStream(File file)</td>
<td>通过文件对象创建</td>
</tr>
<tr>
<td>FileInputStream(String path)</td>
<td>通过文件路径创建</td>
</tr>
<tr>
<td>FileInputStream(FileDescriptor fd)</td>
<td>通过文件描述符创建</td>
</tr>
</tbody></table>
<h3 id="FileInputStream-常用方法"><a href="#FileInputStream-常用方法" class="headerlink" title="FileInputStream 常用方法"></a>FileInputStream 常用方法</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">read()</td>
<td align="left">读取一个字节</td>
</tr>
<tr>
<td align="left">read(byte[] b)</td>
<td align="left">读取字节数组</td>
</tr>
<tr>
<td align="left">read(byte[] b, int off, int len)</td>
<td align="left">读取字节数组</td>
</tr>
<tr>
<td align="left">readAllBytes()</td>
<td align="left">读取所有字节</td>
</tr>
<tr>
<td align="left">readNBytes(int len)</td>
<td align="left">读取指定数量的字节</td>
</tr>
<tr>
<td align="left">transferTo(OutputStream out)</td>
<td align="left">将此输入流的数据传输到指定的输出流</td>
</tr>
<tr>
<td align="left">skip(long n)</td>
<td align="left">跳过指定数量的字节</td>
</tr>
<tr>
<td align="left">available()</td>
<td align="left">获取输入流中剩余的字节数</td>
</tr>
<tr>
<td align="left">close()</td>
<td align="left">关闭输入流，释放资源</td>
</tr>
<tr>
<td align="left">getFD()</td>
<td align="left">获取此输入流的文件描述符对象</td>
</tr>
<tr>
<td align="left">getChannel()</td>
<td align="left">获取与此输入流关联的文件通道</td>
</tr>
<tr>
<td align="left">nullInputStream()</td>
<td align="left">返回一个空输入流，用于忽略输入</td>
</tr>
<tr>
<td align="left">readNBytes(byte[] b, int off, int len)</td>
<td align="left">读取指定数量的字节，并跳过指定数量的字节</td>
</tr>
<tr>
<td align="left">skipNBytes(long n)</td>
<td align="left">跳过指定数量字节</td>
</tr>
<tr>
<td align="left">markSupported()</td>
<td align="left">判断流是否支持 mark 和 reset 方法</td>
</tr>
<tr>
<td align="left">mark(int readAheadLimit)</td>
<td align="left">标记当前位置，并设置读取 ahead 的限制</td>
</tr>
<tr>
<td align="left">reset()</td>
<td align="left">恢复到 mark 的位置</td>
</tr>
</tbody></table>
<h3 id="FileInputStream-示例代码"><a href="#FileInputStream-示例代码" class="headerlink" title="FileInputStream 示例代码"></a>FileInputStream 示例代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"><span class="comment">// 读取全部字节</span></span><br><span class="line"><span class="type">byte</span>[] bytes = fileInputStream.readAllBytes();</span><br><span class="line"><span class="comment">// 将字节转换为字符串并输出</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes);</span><br><span class="line">System.out.println(str);</span><br><span class="line"></span><br><span class="line">fileInputStream.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"><span class="comment">// 使用循环读取文件内容</span></span><br><span class="line"><span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="keyword">while</span> ((len = fileInputStream.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buffer, <span class="number">0</span>, len));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fileInputStream.close();</span><br></pre></td></tr></table></figure>

<h3 id="文件拷贝"><a href="#文件拷贝" class="headerlink" title="文件拷贝"></a>文件拷贝</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件拷贝，将 test.txt 文件内容复制到 test-copy.txt 文件中，test-copy.txt 不存在也没关系，会自动创建</span></span><br><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test-copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 建立输入流和输出流，输入流与源文件关联，输出流与目标文件关联</span></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile);</span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetFile);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取源文件，写入目标文件，不用考虑内存，一次性读取全部内容</span></span><br><span class="line"><span class="type">byte</span>[] bytes = fileInputStream.readAllBytes();</span><br><span class="line">fileOutputStream.write(bytes);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭资源</span></span><br><span class="line">fileInputStream.close();</span><br><span class="line">fileOutputStream.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test-copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile);</span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetFile);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用循环读取源文件，写入目标文件，适合大文件拷贝，一部分一部分读取，避免内存溢出</span></span><br><span class="line"><span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="type">int</span> length;</span><br><span class="line"><span class="keyword">while</span> ((length = fileInputStream.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    fileOutputStream.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fileInputStream.close();</span><br><span class="line">fileOutputStream.close();</span><br></pre></td></tr></table></figure>

<h3 id="try-with-resources-语句"><a href="#try-with-resources-语句" class="headerlink" title="try-with-resources 语句"></a>try-with-resources 语句</h3><p>在前边我们编写代码时，所有的异常都采用了抛出处理，若我们使用 try-catch 语句捕获异常时，但是这样会有一个问题，那就是如果在 close 方法之前发生了异常，close 方法就不会被执行，从而导致资源未被释放。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">    <span class="type">byte</span>[] bytes = fileInputStream.readAllBytes();</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes);</span><br><span class="line">    System.out.println(str);</span><br><span class="line">    fileInputStream.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException exception) &#123;</span><br><span class="line">    exception.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为了解决这个问题，我们可以使用 try-catch-finally 语句，在 finally 块中关闭资源。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// try...catch...finally 语句</span></span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    fileInputStream = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">    <span class="type">byte</span>[] bytes = fileInputStream.readAllBytes();</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes);</span><br><span class="line">    System.out.println(str);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException exception) &#123;</span><br><span class="line">    exception.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fileInputStream != <span class="literal">null</span>) &#123;</span><br><span class="line">            fileInputStream.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是这样的代码就很难看，而且容易出错。为了解决这个问题，Java 7 引入了 try-with-resources 语句，可以自动关闭资源。前提是该资源实现了 <code>AutoCloseable 接口</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// try-with-resources 语句</span></span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> (<span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file)) &#123;</span><br><span class="line">    <span class="type">byte</span>[] bytes = fileInputStream.readAllBytes();</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes);</span><br><span class="line">    System.out.println(str);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException exception) &#123;</span><br><span class="line">    exception.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="乱码"><a href="#乱码" class="headerlink" title="乱码"></a>乱码</h3><p>在使用字节流去读取文件内容时，容易出现乱码的问题，因为字节流无法处理字符编码问题。</p>
<p>因为有些字符在不同的编码下，占用的字节数不同，比如中文，在 UTF-8 编码下占用 3 个字节，而在 GBK 编码下占用 2 个字节。如果使用字节流按错误的字节数去读取文件内容，就会导致乱码。</p>
<p>假设现在文件中有一个中文汉字 <code>你</code>，转为十进制字节码为：<code>228 189 160</code>，也就是说，在读取文件时，必须把这三个字节码全部读取，才能正确显示这个汉字。如果我们每次只读取两个字节码 <code>228 189</code>，<code>160</code>，首先系统会认为这是两个字符，其次系统无法识别，或者识别错误，就会出现乱码或显示不正确的字符。</p>
<p>UTF-8 其实是 Unicode 的一个变种，它使用 1-4 个字节来表示一个字符。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// test.txt 文件内容，编码格式为 UTF-8，所以一个中文字符占用 3 个字节</span><br><span class="line">你好</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个字节为一个单位的读取文件内容，但是一个中文字符占用 3 个字节，所以会出现乱码</span></span><br><span class="line"><span class="comment">// 将 2 改成 3 就不会出现乱码</span></span><br><span class="line"><span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> length;</span><br><span class="line"><span class="keyword">while</span> ((length = fileInputStream.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, length));</span><br><span class="line">&#125;</span><br><span class="line">fileInputStream.close();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果：</span></span><br><span class="line"><span class="comment">// �</span></span><br><span class="line"><span class="comment">// ��</span></span><br><span class="line"><span class="comment">// ��</span></span><br></pre></td></tr></table></figure>

<h3 id="编码和解码"><a href="#编码和解码" class="headerlink" title="编码和解码"></a>编码和解码</h3><table>
<thead>
<tr>
<th>方法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>String(byte[] bytes, String charsetName)</td>
<td>将字节数组转为字符串</td>
</tr>
<tr>
<td>byte[] getBytes(String charsetName)</td>
<td>将字符串转为字节数组</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;你好&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认编码，IDEA 默认是 UTF-8</span></span><br><span class="line"><span class="type">byte</span>[] defaultBytes = str.getBytes();</span><br><span class="line">System.out.println(Arrays.toString(defaultBytes));  <span class="comment">// [-28, -67, -96, -27, -91, -67]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// UTF-8</span></span><br><span class="line"><span class="type">byte</span>[] utf_8Bytes = str.getBytes(StandardCharsets.UTF_8);</span><br><span class="line">System.out.println(Arrays.toString(utf_8Bytes));    <span class="comment">// [-28, -67, -96, -27, -91, -67]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// GBK</span></span><br><span class="line"><span class="type">byte</span>[] gbkBytes = str.getBytes(<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">System.out.println(Arrays.toString(gbkBytes));    <span class="comment">// [-60, -29, -70, -61]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解码，默认是 UTF-8</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(defaultBytes);</span><br><span class="line">System.out.println(str1);                           <span class="comment">// 你好</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// UTF-8</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(defaultBytes, StandardCharsets.UTF_8);</span><br><span class="line">System.out.println(str2);                           <span class="comment">// 你好</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// GBK，解码方式和编码不同，会乱码</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(defaultBytes, <span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">System.out.println(str3);                           <span class="comment">// 浣犲ソ</span></span><br><span class="line"><span class="comment">// 解码方式和编码相同</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(gbkBytes, <span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">System.out.println(str4);                           <span class="comment">// 你好</span></span><br></pre></td></tr></table></figure>

<h2 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h2><p>字符流的底层其实就是字节流，但是在其基础上完善了字符编码和解码的问题。字符流专门用于处理文本数据，能够自动处理字符编码和解码的问题。</p>
<p>字符流同样提供了两个接口：<code>Reader</code> 和 <code>Writer</code>。 <code>Reader</code> 用于读取字符数据，<code>Writer</code> 用于写入字符数据。但是我们不需要直接使用这两个接口，而是使用它们的子类。分别是：<code>FileReader</code> 和 <code>FileWriter</code>。</p>
<h2 id="FileWriter"><a href="#FileWriter" class="headerlink" title="FileWriter"></a>FileWriter</h2><h3 id="FileWriter-构造方法"><a href="#FileWriter-构造方法" class="headerlink" title="FileWriter 构造方法"></a>FileWriter 构造方法</h3><table>
<thead>
<tr>
<th>构造方法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>FileWriter(String fileName)</td>
<td>通过文件路径创建一个字符输出流</td>
</tr>
<tr>
<td>FileWriter(String fileName, boolean append)</td>
<td>通过文件路径创建一个字符输出流</td>
</tr>
<tr>
<td>FileWriter(File file)</td>
<td>通过文件对象创建一个字符输出流</td>
</tr>
<tr>
<td>FileWriter(File file, boolean append)</td>
<td>通过文件对象创建一个字符输出</td>
</tr>
<tr>
<td>FileWriter(FileDescriptor fd)</td>
<td>通过文件描述符创建一个字符输出流</td>
</tr>
<tr>
<td>FileWriter(String fileName, Charset charset)</td>
<td>通过文件路径和字符集创建</td>
</tr>
<tr>
<td>FileWriter(String fileName, Charset charset, boolean append)</td>
<td>通过文件路径、字符集和追加标志创建</td>
</tr>
<tr>
<td>FileWriter(File file, Charset charset)</td>
<td>通过文件对象和字符集创建</td>
</tr>
<tr>
<td>FileWriter(File file, Charset charset, boolean append)</td>
<td>通过文件对象、字符集和追加标志创建</td>
</tr>
</tbody></table>
<h3 id="FileWriter-常用方法"><a href="#FileWriter-常用方法" class="headerlink" title="FileWriter 常用方法"></a>FileWriter 常用方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>getEncoding()</td>
<td>返回字符输出流的编码</td>
</tr>
<tr>
<td>write(int c)</td>
<td>写入一个字符</td>
</tr>
<tr>
<td>write(char[] cbuf, int off, int len)</td>
<td>写入字符数组的一部分</td>
</tr>
<tr>
<td>write(String str, int off, int len)</td>
<td>写入字符串的一部分</td>
</tr>
<tr>
<td>append(CharSequence csq, int start, int end)</td>
<td>写入字符序列的一部分</td>
</tr>
<tr>
<td>append(CharSequence csq)</td>
<td>写入一个字符序列</td>
</tr>
<tr>
<td>flush()</td>
<td>刷新缓冲区，将数据写入文件</td>
</tr>
<tr>
<td>close()</td>
<td>关闭字符输出流，将缓冲区中的数据写入文件</td>
</tr>
<tr>
<td>nullWriter()</td>
<td>返回一个空输出流，用于忽略输出</td>
</tr>
<tr>
<td>write(char[] cbuf)</td>
<td>写入字符数组</td>
</tr>
<tr>
<td>write(String str)</td>
<td>写入字符串</td>
</tr>
<tr>
<td>append(char c)</td>
<td>写入一个字符</td>
</tr>
</tbody></table>
<h3 id="FileWriter-示例代码"><a href="#FileWriter-示例代码" class="headerlink" title="FileWriter 示例代码"></a>FileWriter 示例代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileWriter</span> <span class="variable">fileWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串</span></span><br><span class="line">fileWriter.write(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line">fileWriter.write(<span class="keyword">new</span> <span class="title class_">char</span>[]&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">fileWriter.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定字符集，并且追加内容</span></span><br><span class="line"><span class="type">FileWriter</span> <span class="variable">fileWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file, Charset.forName(<span class="string">&quot;UTF-8&quot;</span>), <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串</span></span><br><span class="line">fileWriter.write(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line">fileWriter.write(<span class="keyword">new</span> <span class="title class_">char</span>[]&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">fileWriter.close();</span><br></pre></td></tr></table></figure>

<h2 id="FileReader"><a href="#FileReader" class="headerlink" title="FileReader"></a>FileReader</h2><h3 id="FileReader-构造方法"><a href="#FileReader-构造方法" class="headerlink" title="FileReader 构造方法"></a>FileReader 构造方法</h3><table>
<thead>
<tr>
<th>构造方法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>FileReader(File file)</td>
<td>通过文件对象创建一个字符输入流</td>
</tr>
<tr>
<td>FileReader(String fileName)</td>
<td>通过文件路径创建一个字符输入流</td>
</tr>
<tr>
<td>FileReader(FileDescriptor fd)</td>
<td>通过文件描述符创建一个字符输入流</td>
</tr>
<tr>
<td>FileReader(File file, Charset charset)</td>
<td>通过文件对象和字符集创建</td>
</tr>
<tr>
<td>FileReader(String fileName, Charset charset)</td>
<td>通过文件路径和字符集创建</td>
</tr>
</tbody></table>
<h3 id="FileReader-常用方法"><a href="#FileReader-常用方法" class="headerlink" title="FileReader 常用方法"></a>FileReader 常用方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>getEncoding()</td>
<td>返回字符输入流的编码</td>
</tr>
<tr>
<td>read(CharBuffer target)</td>
<td>读取字符到 CharBuffer 对象中</td>
</tr>
<tr>
<td>read()</td>
<td>读取一个字符</td>
</tr>
<tr>
<td>read(char[] cbuf, int off, int len)</td>
<td>读取字符数组</td>
</tr>
<tr>
<td>read(char[] cbuf)</td>
<td>读取字符数组</td>
</tr>
<tr>
<td>ready()</td>
<td>判断流是否已经准备好</td>
</tr>
<tr>
<td>close()</td>
<td>关闭流</td>
</tr>
<tr>
<td>nullRead()</td>
<td>返回一个 int 类型的值，如果返回-1，则表示已经读完</td>
</tr>
<tr>
<td>skip(long n)</td>
<td>跳过指定数量的字符</td>
</tr>
<tr>
<td>markSupported()</td>
<td>判断流是否支持 mark 和 reset 方法</td>
</tr>
<tr>
<td>mark(int readAheadLimit)</td>
<td>设置 mark 的位置，readAheadLimit 表示可以读取的最大字节数</td>
</tr>
<tr>
<td>reset()</td>
<td>恢复到 mark 的位置</td>
</tr>
<tr>
<td>transferTo(Writer out)</td>
<td>将此输入流的数据传输到指定的输出流</td>
</tr>
</tbody></table>
<h3 id="FileReader-示例代码"><a href="#FileReader-示例代码" class="headerlink" title="FileReader 示例代码"></a>FileReader 示例代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> flag;</span><br><span class="line"><span class="keyword">while</span> ((flag = fileReader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.print((<span class="type">char</span>)flag);   <span class="comment">// 你好</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fileReader.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>[] buffer = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((len = fileReader.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.print(<span class="keyword">new</span> <span class="title class_">String</span>(buffer, <span class="number">0</span>, len));</span><br><span class="line">&#125;</span><br><span class="line">fileReader.close();</span><br></pre></td></tr></table></figure>

<h2 id="字符流原理"><a href="#字符流原理" class="headerlink" title="字符流原理"></a>字符流原理</h2><p>在创建字符流对象时，底层会创建一个缓冲区，大小为 8KB。当我们调用字符流的 read 或 write 方法时，实际上是先将数据读入缓冲区或写入缓冲区，当缓冲区满时，才会将数据写入文件或从文件读取数据到缓冲区。在读取数据时，如果缓冲区为空，则会从文件中读取数据到缓冲区，然后依次从缓冲区中取出数据，当缓冲区的数据也被读取完时，才会再次从文件中继续读取数据，新读取的数据会覆盖缓冲区中的数据，但是如果新的数据长度小于缓冲区，那么缓冲区中就会有部分数据无法被覆盖，能保留上一次读取的数据。<code>当文件内容被加载至缓冲区后，即使文件删除或者内容被修改，字符流仍能通过缓冲区获取文件数据。</code>在写入数据时，字符流其实是现象内容添加到缓冲区，只有当：<code>1.缓冲区满了</code>、<code>2.调用了 flush 方法</code>、<code>3.调用了 close 方法</code>时，才会将数据写入文件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">FileWriter</span> <span class="variable">fileWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加数据到缓冲区</span></span><br><span class="line">fileWriter.write(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 刷新缓冲区，将数据写入文件</span></span><br><span class="line">fileWriter.flush();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不会写入文件，而是写入缓冲区，除非调用 flush 方法或者 close 方法</span></span><br><span class="line">fileWriter.write(<span class="keyword">new</span> <span class="title class_">char</span>[]&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// fileWriter.close();</span></span><br></pre></td></tr></table></figure>

<h2 id="字符流-练习"><a href="#字符流-练习" class="headerlink" title="字符流 练习"></a>字符流 练习</h2><p>拷贝文件夹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">originDir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\CodeProjects\\java-study&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">targetDir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\CodeProjects\\java-study-copy&quot;</span>);</span><br><span class="line">    copyDir(originDir, targetDir);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyDir</span><span class="params">(File originDir, File targetDir)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">if</span> (originDir.isFile()) &#123;</span><br><span class="line">        <span class="comment">// copyFile(originDir, targetDir);</span></span><br><span class="line">        <span class="comment">// Files.copy JDK 9 新特性</span></span><br><span class="line">        Files.copy(originDir.toPath(), targetDir.toPath());</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (originDir.isDirectory()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!targetDir.exists()) &#123;</span><br><span class="line">            targetDir.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        File[] files = originDir.listFiles();</span><br><span class="line">        <span class="keyword">if</span> (files != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">                copyDir(file, <span class="keyword">new</span> <span class="title class_">File</span>(targetDir, file.getName()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(File originFile, File targetFile)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> (</span><br><span class="line">            <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile);</span><br><span class="line">            <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetFile);</span><br><span class="line">            )&#123;</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> length;</span><br><span class="line">        <span class="keyword">while</span> ((length = fis.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            fos.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>文件加密</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\CodeProjects\\ad783e83a6d4434c8a1428b942c1a986.jpg&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">encryptionFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\CodeProjects\\encryption.jpg&quot;</span>);</span><br><span class="line">    <span class="comment">// 加密</span></span><br><span class="line">    encryption(originFile, encryptionFile);</span><br><span class="line">    <span class="comment">// 解密</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">decryptionFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\CodeProjects\\decryption.jpg&quot;</span>);</span><br><span class="line">    encryption(encryptionFile, decryptionFile);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">encryption</span><span class="params">(File originDir, File targetDir)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originDir);</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetDir);</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line">    <span class="keyword">while</span> ((length = fis.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; buffer.length; i++) &#123;</span><br><span class="line">            buffer[i] = (<span class="type">byte</span>) (buffer[i] ^ i);</span><br><span class="line">        &#125;</span><br><span class="line">        fos.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">    &#125;</span><br><span class="line">    fis.close();</span><br><span class="line">    fos.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>数据排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line">StringBuilder stringBuilder= <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line"><span class="type">char</span>[] buffer = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="type">int</span> length;</span><br><span class="line"><span class="keyword">while</span> ((length = fr.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">    stringBuilder.append(<span class="keyword">new</span> <span class="title class_">String</span>(buffer, <span class="number">0</span>, length));</span><br><span class="line">&#125;</span><br><span class="line">fr.close();</span><br><span class="line"><span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> stringBuilder.toString();</span><br><span class="line"><span class="type">char</span>[] charArray = string.toCharArray();</span><br><span class="line">Arrays.sort(charArray);</span><br><span class="line">System.out.println(Arrays.toString(charArray));</span><br><span class="line"><span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line">fw.write(charArray);</span><br><span class="line">fw.close();</span><br></pre></td></tr></table></figure>

<h2 id="缓冲流"><a href="#缓冲流" class="headerlink" title="缓冲流"></a>缓冲流</h2><p>前边学习了字节流和字符流，一共四个类：<code>FileInputStream</code>、<code>FileOutputStream</code>、<code>FileReader</code> 和 <code>FileWriter</code>。这四个类在进行读写操作时，效率较低，功能欠缺。为了提高读写效率，Java 提供了缓冲流。 缓冲流在字节流和字符流的基础上，增加了一个缓冲区，读写数据时，先将数据读入缓冲区或写入缓冲区，当缓冲区满时，才会将数据写入文件或从文件读取数据到缓冲区。缓冲流有四个类：<code>BufferedInputStream</code>、<code>BufferedOutputStream</code>、<code>BufferedReader</code> 和 <code>BufferedWriter</code>。提高读写效率。</p>
<p>缓冲流并不是一个新的流，而是对已有流的包装。使用缓冲流时，需要将已有的流作为参数传入缓冲流的构造方法中。</p>
<p>虽然字符流中包含了缓冲区，但是缓冲流中的缓冲区是可以自定义大小的。且缓冲流中还提供了更便捷的读写方式，总的来说还是有一定效率的提升的。</p>
<h2 id="字节缓冲流"><a href="#字节缓冲流" class="headerlink" title="字节缓冲流"></a>字节缓冲流</h2><h3 id="字节缓冲流-构造方法"><a href="#字节缓冲流-构造方法" class="headerlink" title="字节缓冲流 构造方法"></a>字节缓冲流 构造方法</h3><table>
<thead>
<tr>
<th align="left">构造方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">BufferedInputStream(InputStream in)</td>
<td align="left">创建一个 BufferedInputStream 对象，该对象将数据写入到指定的 InputStream 对象中</td>
</tr>
<tr>
<td align="left">BufferedInputStream(InputStream in, int size)</td>
<td align="left">创建一个 BufferedInputStream 对象，该对象将数据写入到指定的 InputStream 对象中，并指定缓冲区大小</td>
</tr>
<tr>
<td align="left">BufferedOutputStream(OutputStream out)</td>
<td align="left">创建一个 BufferedOutputStream 对象，该对象将数据写入到指定的 OutputStream 对象中</td>
</tr>
<tr>
<td align="left">BufferedOutputStream(OutputStream out, int size)</td>
<td align="left">创建一个 BufferedOutputStream 对象，该对象将数据写入到指定的 OutputStream 对象中，并指定缓冲区大小</td>
</tr>
</tbody></table>
<h3 id="字节缓冲流-常用方法"><a href="#字节缓冲流-常用方法" class="headerlink" title="字节缓冲流 常用方法"></a>字节缓冲流 常用方法</h3><p>BufferedInputStream 继承 FileInputStream，所以它有 FileInputStream 和 InputStream 的所有方法。</p>
<p>BufferedOutputStream 继承 FileOutputStream，所以它有 FileOutputStream 和 OutputStream 的所有方法。</p>
<h3 id="字节缓冲流-代码示例"><a href="#字节缓冲流-代码示例" class="headerlink" title="字节缓冲流 代码示例"></a>字节缓冲流 代码示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test-copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建缓冲流，需要传入基本流对象</span></span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile));</span><br><span class="line"><span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetFile));</span><br><span class="line"></span><br><span class="line"><span class="comment">// byte[] bytes = bis.readAllBytes();</span></span><br><span class="line"><span class="comment">// bos.write(bytes);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接使用 transferTo 方法进行文件拷贝</span></span><br><span class="line">bis.transferTo(bos);</span><br><span class="line"></span><br><span class="line">bis.close();</span><br><span class="line">bos.close();</span><br></pre></td></tr></table></figure>

<h2 id="字符缓冲流"><a href="#字符缓冲流" class="headerlink" title="字符缓冲流"></a>字符缓冲流</h2><h3 id="字符缓冲流-构造方法"><a href="#字符缓冲流-构造方法" class="headerlink" title="字符缓冲流 构造方法"></a>字符缓冲流 构造方法</h3><table>
<thead>
<tr>
<th align="left">构造方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">BufferedReader(Reader in)</td>
<td align="left">创建一个 BufferedReader 对象，该对象将数据写入到指定的 Reader 对象中</td>
</tr>
<tr>
<td align="left">BufferedReader(Reader in, int size)</td>
<td align="left">创建一个 BufferedReader 对象，该对象将数据写入到指定的 Reader 对象中，并指定缓冲区大小</td>
</tr>
<tr>
<td align="left">BufferedWriter(Writer out)</td>
<td align="left">创建一个 BufferedWriter 对象，该对象将数据写入到指定的 Writer 对象中</td>
</tr>
<tr>
<td align="left">BufferedWriter(Writer out, int size)</td>
<td align="left">创建一个 BufferedWriter 对象，该对象将数据写入到指定的 Writer 对象中，并指定缓冲区大小</td>
</tr>
</tbody></table>
<h3 id="字符缓冲流-常用方法"><a href="#字符缓冲流-常用方法" class="headerlink" title="字符缓冲流 常用方法"></a>字符缓冲流 常用方法</h3><p>BufferedReader 继承 FileReader，所以它有 FileReader 和 Reader 的所有方法。</p>
<p>BufferedWriter 继承 FileWriter，所以它有 FileWriter 和 Writer 的所有方法。</p>
<h4 id="BufferedReader-独有的方法"><a href="#BufferedReader-独有的方法" class="headerlink" title="BufferedReader 独有的方法"></a>BufferedReader 独有的方法</h4><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">readLine()</td>
<td align="left">读取一行数据</td>
</tr>
<tr>
<td align="left">lines()</td>
<td align="left">读取所有行数据</td>
</tr>
</tbody></table>
<h4 id="BufferedWriter-独有的方法"><a href="#BufferedWriter-独有的方法" class="headerlink" title="BufferedWriter 独有的方法"></a>BufferedWriter 独有的方法</h4><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">newLine()</td>
<td align="left">换行，可以根据不同的操作系统进行换行</td>
</tr>
</tbody></table>
<h3 id="字符缓冲流-代码示例"><a href="#字符缓冲流-代码示例" class="headerlink" title="字符缓冲流 代码示例"></a>字符缓冲流 代码示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(originFile));</span><br><span class="line"><span class="comment">// String line;</span></span><br><span class="line"><span class="comment">// while ((line = br.readLine()) != null) &#123;</span></span><br><span class="line"><span class="comment">//     System.out.println(line);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">Stream&lt;String&gt; lines = br.lines();</span><br><span class="line">List&lt;String&gt; collect = lines.collect(Collectors.toList());</span><br><span class="line">System.out.println(collect);</span><br><span class="line">br.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(originFile));</span><br><span class="line"></span><br><span class="line">bw.write(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"><span class="comment">// 写入一个换行符，会根据操作系统自动匹配对应的换行符</span></span><br><span class="line">bw.newLine();</span><br><span class="line">bw.write(<span class="string">&quot;World&quot;</span>);</span><br><span class="line"></span><br><span class="line">bw.close();</span><br></pre></td></tr></table></figure>

<h2 id="字符缓冲流-练习"><a href="#字符缓冲流-练习" class="headerlink" title="字符缓冲流 练习"></a>字符缓冲流 练习</h2><p>比较基本字节流和缓冲字节流的效率差异</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test-copy.txt&quot;</span>);</span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="comment">// copyFile1(originFile, targetFile);   // 209</span></span><br><span class="line">    copyFile2(originFile, targetFile);      <span class="comment">// 69</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(end - start);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile1</span><span class="params">(File originFile, File targetFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile);</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetFile);</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line">    <span class="keyword">while</span> ((length = fis.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        fos.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">    &#125;</span><br><span class="line">    fis.close();</span><br><span class="line">    fos.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile2</span><span class="params">(File originFile, File targetFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile));</span><br><span class="line">    <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetFile));</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line">    <span class="keyword">while</span> ((length = bis.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        bos.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">    &#125;</span><br><span class="line">    bis.close();</span><br><span class="line">    bos.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>读取文件，根据段落序号将内容排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test-copy.txt&quot;</span>);</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(originFile));</span><br><span class="line"><span class="type">BufferedWriter</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(targetFile));</span><br><span class="line">String[] array = bis.lines().sorted((s1, s2) -&gt; &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">index1</span> <span class="operator">=</span> s1.split(<span class="string">&quot;\\.&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="type">String</span> <span class="variable">index2</span> <span class="operator">=</span> s2.split(<span class="string">&quot;\\.&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">return</span> Integer.parseInt(index1) - Integer.parseInt(index2);</span><br><span class="line">&#125;).toArray(String[]::<span class="keyword">new</span>);</span><br><span class="line"><span class="keyword">for</span> (String s : array) &#123;</span><br><span class="line">    bos.write(s);</span><br><span class="line">    bos.newLine();</span><br><span class="line">&#125;</span><br><span class="line">bis.close();</span><br><span class="line">bos.close();</span><br></pre></td></tr></table></figure>

<h2 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h2><p>转换流是字符流，用于将字节流转换为字符流。属于高级流，用于包装基本流。 转换流是字节流和字符流之间的桥梁。用于将字节流转换为字符流，或者将字符流转换为字节流。转换流有两个类：<code>InputStreamReader</code> 和 <code>OutputStreamWriter</code>。</p>
<p>在 JDK 11 之后，FileReader 和 FileWriter 中也可以指定字符集，所以在读取文件时，转换流不再需要。而在其他场景下，转换流依然有其存在的价值。</p>
<h3 id="转换流-构造方法"><a href="#转换流-构造方法" class="headerlink" title="转换流 构造方法"></a>转换流 构造方法</h3><h4 id="转换输入流"><a href="#转换输入流" class="headerlink" title="转换输入流"></a>转换输入流</h4><table>
<thead>
<tr>
<th>构造方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>InputStreamReader(InputStream in)</td>
<td>创建一个 InputStreamReader 对象，该对象将字节流转换为字符流</td>
</tr>
<tr>
<td>InputStreamReader(InputStream in, String charsetName)</td>
<td>创建一个 InputStreamReader 对象，该对象将字节流转换为字符流，并指定字符集</td>
</tr>
<tr>
<td>InputStreamReader(InputStream in, Charset cs)</td>
<td>创建一个 InputStreamReader 对象，该对象将字节流转换为字符流，并指定字符集</td>
</tr>
<tr>
<td>InputStreamReader(InputStream in, CharsetDecoder dec)</td>
<td>创建一个 InputStreamReader 对象，该对象将字节流转换为字符流，并指定字符集解码器</td>
</tr>
</tbody></table>
<h4 id="转换输出流"><a href="#转换输出流" class="headerlink" title="转换输出流"></a>转换输出流</h4><p>| OutputStreamWriter(OutputStream out) | 创建一个 OutputStreamWriter 对象，该对象将字符流转换为字节流 |<br>| OutputStreamWriter(OutputStream out, String charsetName) | 创建一个 OutputStreamWriter 对象，该对象将字符流转换为字节流，并指定字符集 |<br>| OutputStreamWriter(OutputStream out, Charset cs) | 创建一个 OutputStreamWriter 对象，该对象将字符流转换为字节流，并指定字符集 |<br>| OutputStreamWriter(OutputStream out, CharsetEncoder enc) | 创建一个 OutputStreamWriter 对象，该对象将字符流转换为字节流，并指定字符集编码器 |</p>
<h3 id="转换流-常用方法"><a href="#转换流-常用方法" class="headerlink" title="转换流 常用方法"></a>转换流 常用方法</h3><ul>
<li><p>转换输入流继承 Reader，所以它有 Reader 的所有方法。</p>
</li>
<li><p>转换输出流继承 Writer，所以它有 Writer 的所有方法。</p>
</li>
</ul>
<h3 id="转换流-代码示例"><a href="#转换流-代码示例" class="headerlink" title="转换流 代码示例"></a>转换流 代码示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test-copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// UTF-8 编码的文件，使用 InputStreamReader 读取，OutputStreamWriter 写入 GBK 编码的文件</span></span><br><span class="line"><span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile), Charset.forName(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"><span class="type">OutputStreamWriter</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetFile), Charset.forName(<span class="string">&quot;GBK&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>[] buf = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="keyword">while</span> ((len = isr.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">    osw.write(buf, <span class="number">0</span>, len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isr.close();</span><br><span class="line">osw.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test-copy.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将字节流通过转换流转为字符流</span></span><br><span class="line"><span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile), Charset.forName(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"><span class="type">OutputStreamWriter</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(targetFile), Charset.forName(<span class="string">&quot;GBK&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 再将字符流通过缓冲流进行包装</span></span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line"><span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(osw);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取所有行，存入数组，再逐行写入目标文件</span></span><br><span class="line">String[] array = br.lines().toArray(String[]::<span class="keyword">new</span>);</span><br><span class="line"><span class="keyword">for</span> (String s : array) &#123;</span><br><span class="line">    bw.write(s);</span><br><span class="line">    bw.newLine();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isr.close();</span><br><span class="line">osw.close();</span><br></pre></td></tr></table></figure>

<h2 id="序列化流"><a href="#序列化流" class="headerlink" title="序列化流"></a>序列化流</h2><p>序列化流是字节流，用于将 Java 对象转换为字节流。序列化流是高级流，用于包装基本流。序列化流是 Java 对象和字节流之间的桥梁。用于将 <code>Java 对象转换为字节流</code>，或者将<code>字节流转换为 Java 对象</code>。序列化流有两个类：<code>ObjectInputStream</code> 和 <code>ObjectOutputStream</code>。</p>
<p>在使用序列化流操作 Java 对象时，必须保证对象是可序列化的。必须让类<code>实现 Serializable 接口</code>，或者将类声明为<code>可序列化</code>的。</p>
<p>在操作 Java 对象时，若不想某个属性被序列化，可以在属性声明时加上 <code>transient</code> 关键字。</p>
<h3 id="序列化流-构造方法"><a href="#序列化流-构造方法" class="headerlink" title="序列化流 构造方法"></a>序列化流 构造方法</h3><table>
<thead>
<tr>
<th>构造方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ObjectInputStream(InputStream in)</td>
<td>创建一个 ObjectInputStream 对象，该对象将字节流转换为 Java 对象</td>
</tr>
<tr>
<td>ObjectOutputStream(OutputStream out)</td>
<td>创建一个 ObjectOutputStream 对象，该对象将 Java 对象转换为字节流</td>
</tr>
</tbody></table>
<h3 id="序列化流-常用方法"><a href="#序列化流-常用方法" class="headerlink" title="序列化流 常用方法"></a>序列化流 常用方法</h3><h4 id="序列化输入流"><a href="#序列化输入流" class="headerlink" title="序列化输入流"></a>序列化输入流</h4><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>readObject()</td>
<td>读取对象</td>
</tr>
<tr>
<td>readUnshared()</td>
<td>读取对象，并返回一个非共享对象</td>
</tr>
<tr>
<td>defaultReadObject()</td>
<td>读取对象，并调用默认方法</td>
</tr>
<tr>
<td>readFields()</td>
<td>读取对象</td>
</tr>
<tr>
<td>registerValidation(ObjectInputValidation obj, int prio)</td>
<td>注册对象验证</td>
</tr>
</tbody></table>
<h4 id="序列化输出流"><a href="#序列化输出流" class="headerlink" title="序列化输出流"></a>序列化输出流</h4><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>writeObject(Object obj)</td>
<td>写入对象</td>
</tr>
<tr>
<td>useProtocolVersion(int version)</td>
<td>设置序列化协议版本</td>
</tr>
<tr>
<td>writeUnshared(Object obj)</td>
<td>写入对象，并返回一个非共享对象</td>
</tr>
<tr>
<td>defaultWriteObject()</td>
<td>写入对象，并调用默认方法</td>
</tr>
<tr>
<td>putFields()</td>
<td>写入对象</td>
</tr>
<tr>
<td>writeFields()</td>
<td>写入对象</td>
</tr>
<tr>
<td>reset()</td>
<td>重置对象</td>
</tr>
</tbody></table>
<h3 id="序列化流-代码示例"><a href="#序列化流-代码示例" class="headerlink" title="序列化流 代码示例"></a>序列化流 代码示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="comment">// 必须实现 Serializable 接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 固定的序列化版本号，防止序列化版本号不一致导致异常，可以让 IDEA 生成序列化版本号</span></span><br><span class="line">    <span class="meta">@Serial</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">// 忽略此属性的序列化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">20</span>, <span class="string">&quot;北京&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 Java 对象转换为字节流，写入目标文件</span></span><br><span class="line"><span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(originFile));</span><br><span class="line"><span class="comment">// address 属性被忽略，并不会写入目标文件</span></span><br><span class="line">oos.writeObject(student);</span><br><span class="line">oos.close();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将字节流转换为 Java 对象，并读取目标文件</span></span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile));</span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> ois.readObject();</span><br><span class="line"><span class="comment">// address 属性被忽略，所以为 null</span></span><br><span class="line"><span class="keyword">if</span> (o <span class="keyword">instanceof</span> Student tempStudent) &#123;</span><br><span class="line">    System.out.println(tempStudent);    <span class="comment">// Student&#123;name=&#x27;zhangsan&#x27;, age=20, address=&#x27;null&#x27;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line">ois.close();</span><br></pre></td></tr></table></figure>

<h3 id="序列化流-练习"><a href="#序列化流-练习" class="headerlink" title="序列化流 练习"></a>序列化流 练习</h3><p>随机写入 N 个 Java 对象，并保存到文件中。在将文件内容读取出来时，将文件内容转换为 Java 对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">List&lt;Student&gt; studentList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Student&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">    studentList.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;学生&quot;</span> + i, <span class="number">20</span> + i, <span class="string">&quot;北京&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(studentList);</span><br><span class="line"></span><br><span class="line"><span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(originFile));</span><br><span class="line"><span class="comment">// 不需要逐个写入 Student 对象，可以写入 List&lt;Student&gt; 对象</span></span><br><span class="line">oos.writeObject(studentList);</span><br><span class="line">oos.close();</span><br><span class="line"></span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(originFile));</span><br><span class="line"><span class="comment">// 读取的时候直接读取 List&lt;Student&gt; 对象，就不需要考虑 Student 对象的个数了</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> ois.readObject();</span><br><span class="line"><span class="keyword">if</span> (o <span class="keyword">instanceof</span> List newStudentList) &#123;</span><br><span class="line">    System.out.println(newStudentList);</span><br><span class="line">&#125;</span><br><span class="line">ois.close();</span><br></pre></td></tr></table></figure>

<h2 id="打印流"><a href="#打印流" class="headerlink" title="打印流"></a>打印流</h2><p>打印流是 Java 语言内置的，用于将数据写入到文件中。打印流只能用于输出数据，不能用于输入数据。所以打印流只有两个类：<code>PrintStream</code> 和 <code>PrintWriter</code>。<br>分别对应字节打印流和字符打印流。</p>
<h3 id="打印流-构造方法"><a href="#打印流-构造方法" class="headerlink" title="打印流 构造方法"></a>打印流 构造方法</h3><h4 id="字节打印流"><a href="#字节打印流" class="headerlink" title="字节打印流"></a>字节打印流</h4><table>
<thead>
<tr>
<th>构造方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>PrintStream(OutputStream out)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的 OutputStream 中</td>
</tr>
<tr>
<td>PrintStream(OutputStream out, boolean autoFlush)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的 OutputStream 中，并设置自动刷新</td>
</tr>
<tr>
<td>PrintStream(OutputStream out, boolean autoFlush, String encoding)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的 OutputStream 中，并设置自动刷新和字符编码</td>
</tr>
<tr>
<td>PrintStream(OutputStream out, boolean autoFlush, Charset charset)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的 OutputStream 中，并设置自动刷新和字符编码</td>
</tr>
<tr>
<td>PrintStream(String fileName)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的文件中</td>
</tr>
<tr>
<td>PrintStream(String fileName, String csn)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的文件中，并设置字符编码</td>
</tr>
<tr>
<td>PrintStream(String fileName, Charset charset)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的文件中，并设置字符编码</td>
</tr>
<tr>
<td>PrintStream(File file)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的文件中</td>
</tr>
<tr>
<td>PrintStream(File file, String csn)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的文件中，并设置字符编码</td>
</tr>
<tr>
<td>PrintStream(File file, Charset charset)</td>
<td>创建一个 PrintStream 对象，该对象将数据写入到指定的文件中，并设置字符编码</td>
</tr>
</tbody></table>
<h4 id="字符打印流"><a href="#字符打印流" class="headerlink" title="字符打印流"></a>字符打印流</h4><table>
<thead>
<tr>
<th>构造方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>PrintWriter(Writer out)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的 Writer 中</td>
</tr>
<tr>
<td>PrintWriter(Writer out, boolean autoFlush)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的 Writer 中，并设置自动刷新</td>
</tr>
<tr>
<td>PrintWriter(OutputStream out)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的 OutputStream 中</td>
</tr>
<tr>
<td>PrintWriter(OutputStream out, boolean autoFlush)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的 OutputStream 中，并设置自动刷新</td>
</tr>
<tr>
<td>PrintWriter(OutputStream out, boolean autoFlush, Charset charset)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的 OutputStream 中，并设置自动刷新和字符编码</td>
</tr>
<tr>
<td>PrintWriter(String fileName)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的文件中</td>
</tr>
<tr>
<td>PrintWriter(String fileName, String csn)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的文件中，并设置字符编码</td>
</tr>
<tr>
<td>PrintWriter(String fileName, Charset charset)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的文件中，并设置字符编码</td>
</tr>
<tr>
<td>PrintWriter(File file)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的文件中</td>
</tr>
<tr>
<td>PrintWriter(File file, String csn)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的文件中，并设置字符编码</td>
</tr>
<tr>
<td>PrintWriter(File file, Charset charset)</td>
<td>创建一个 PrintWriter 对象，该对象将数据写入到指定的文件中，并设置字符编码</td>
</tr>
</tbody></table>
<h3 id="打印流-常用方法"><a href="#打印流-常用方法" class="headerlink" title="打印流 常用方法"></a>打印流 常用方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>void write(int b)</td>
<td>写入一个字节 &#x2F; 字符</td>
</tr>
<tr>
<td>void print(xxx)</td>
<td>打印任意数据</td>
</tr>
<tr>
<td>void println(xxx)</td>
<td>打印任意是数据，自带换行，自动刷新</td>
</tr>
<tr>
<td>void printf(xxx)</td>
<td>格式化打印任意数据</td>
</tr>
<tr>
<td>void flush()</td>
<td>刷新缓冲区，将数据写入到文件中</td>
</tr>
<tr>
<td>void frommat(xxx)</td>
<td>格式化打印任意数据</td>
</tr>
<tr>
<td>void append(xxx)</td>
<td>追加任意数据</td>
</tr>
</tbody></table>
<h3 id="打印流-代码示例"><a href="#打印流-代码示例" class="headerlink" title="打印流 代码示例"></a>打印流 代码示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(originFile);</span><br><span class="line"><span class="type">PrintStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(fos, <span class="literal">true</span>, Charset.forName(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"><span class="comment">// 输出，带换行</span></span><br><span class="line">out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line"><span class="comment">// 原样输出</span></span><br><span class="line">out.print(<span class="number">97</span>);</span><br><span class="line"><span class="comment">// 格式化输出</span></span><br><span class="line">out.printf(<span class="string">&quot;%s你好&quot;</span>, <span class="string">&quot;小李&quot;</span>);</span><br><span class="line"><span class="comment">// 格式化输出</span></span><br><span class="line">out.format(<span class="string">&quot;%s你好&quot;</span>, <span class="string">&quot;小明&quot;</span>);</span><br><span class="line"><span class="comment">// 追加</span></span><br><span class="line">out.append(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line">out.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">originFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(originFile);</span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(fw, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line"></span><br><span class="line">out.print(<span class="number">97</span>);</span><br><span class="line"></span><br><span class="line">out.printf(<span class="string">&quot;%s你好&quot;</span>, <span class="string">&quot;小李&quot;</span>);</span><br><span class="line"></span><br><span class="line">out.format(<span class="string">&quot;%s你好&quot;</span>, <span class="string">&quot;小明&quot;</span>);</span><br><span class="line"></span><br><span class="line">out.append(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line">out.close();</span><br></pre></td></tr></table></figure>

<h2 id="压缩流"><a href="#压缩流" class="headerlink" title="压缩流"></a>压缩流</h2><p>压缩流：是字节流，用于对数据进行压缩和解压缩。压缩流是高级流，用于包装基本流。压缩流有两个类：<code>ZIPInputStream</code> 和 <code>ZIPOutputStream</code>。分别用于解压缩和压缩数据。压缩流只适用于扩展名为 <code>zip</code> 格式的文件。</p>
<p>除了 <code>ZIPXXX</code> 流，还有 <code>GZIPXXX</code> 流，用于对数据进行 GZIP 压缩和解压缩。</p>
<h3 id="压缩流-构造方法"><a href="#压缩流-构造方法" class="headerlink" title="压缩流 构造方法"></a>压缩流 构造方法</h3><h4 id="ZipInputStream-构造方法"><a href="#ZipInputStream-构造方法" class="headerlink" title="ZipInputStream 构造方法"></a>ZipInputStream 构造方法</h4><table>
<thead>
<tr>
<th>构造方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ZipInputStream(InputStream in)</td>
<td>创建一个 ZipInputStream 对象，该对象将数据从指定的 InputStream 中读取</td>
</tr>
<tr>
<td>ZipInputStream(InputStream in, Charset charset)</td>
<td>创建一个 ZipInputStream 对象，该对象将数据从指定的 InputStream 中读取，并设置字符编码</td>
</tr>
</tbody></table>
<h4 id="ZipOutputStream-构造方法"><a href="#ZipOutputStream-构造方法" class="headerlink" title="ZipOutputStream 构造方法"></a>ZipOutputStream 构造方法</h4><table>
<thead>
<tr>
<th>构造方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ZipOutputStream(OutputStream out)</td>
<td>创建一个 ZipOutputStream 对象，该对象将数据写入到指定的 OutputStream 中</td>
</tr>
<tr>
<td>ZipOutputStream(OutputStream out, Charset charset)</td>
<td>创建一个 ZipOutputStream 对象，该对象将数据写入到指定的 OutputStream 中，并设置字符编码</td>
</tr>
</tbody></table>
<h3 id="压缩流-常用方法"><a href="#压缩流-常用方法" class="headerlink" title="压缩流 常用方法"></a>压缩流 常用方法</h3><h4 id="ZipInputStream-常用方法"><a href="#ZipInputStream-常用方法" class="headerlink" title="ZipInputStream 常用方法"></a>ZipInputStream 常用方法</h4><p>ZipInputStream 继承自 FileInputStream 的所有方法。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>getNextEntry()</td>
<td>获取下一个条目</td>
</tr>
<tr>
<td>closeEntry()</td>
<td>关闭当前条目</td>
</tr>
</tbody></table>
<h4 id="ZipOutputStream-常用方法"><a href="#ZipOutputStream-常用方法" class="headerlink" title="ZipOutputStream 常用方法"></a>ZipOutputStream 常用方法</h4><p>ZipOutputStream 继承自 FileOutputStream 的所有方法。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>setComment(String comment)</td>
<td>设置注释</td>
</tr>
<tr>
<td>setMethod(int method)</td>
<td>设置压缩方法</td>
</tr>
<tr>
<td>setLevel(int level)</td>
<td>设置压缩级别</td>
</tr>
<tr>
<td>putNextEntry(ZipEntry e)</td>
<td>添加下一个条目</td>
</tr>
<tr>
<td>closeEntry()</td>
<td>关闭当前条目</td>
</tr>
</tbody></table>
<h4 id="ZipEntry"><a href="#ZipEntry" class="headerlink" title="ZipEntry"></a>ZipEntry</h4><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ZipEntry(String name)</td>
<td>创建一个 ZipEntry 对象，该对象表示一个条目</td>
</tr>
<tr>
<td>ZipEntry(ZipEntry e)</td>
<td>创建一个 ZipEntry 对象，该对象表示一个条目</td>
</tr>
<tr>
<td>getName()</td>
<td>获取条目名称</td>
</tr>
<tr>
<td>set &#x2F; getTime(long time)</td>
<td>设置 &#x2F; 获取条目时间</td>
</tr>
<tr>
<td>set &#x2F; getTimeLocal(LocalDateTime time)</td>
<td>设置 &#x2F; 获取条目时间</td>
</tr>
<tr>
<td>set &#x2F; getLastModifiedTime(FileTime time)</td>
<td>设置 &#x2F; 获取条目最后修改时间</td>
</tr>
<tr>
<td>set &#x2F; getLastAccessTime(FileTime time)</td>
<td>设置 &#x2F; 获取条目最后访问时间</td>
</tr>
<tr>
<td>set &#x2F; getCreationTime(FileTime time)</td>
<td>设置 &#x2F; 获取条目创建时间</td>
</tr>
<tr>
<td>set &#x2F; getSize(long size)</td>
<td>设置 &#x2F; 获取条目大小</td>
</tr>
<tr>
<td>set &#x2F; getCompressedSize(long size)</td>
<td>设置 &#x2F; 获取条目压缩后大小</td>
</tr>
<tr>
<td>set &#x2F; getCrc(long crc)</td>
<td>设置 &#x2F; 获取条目校验和</td>
</tr>
<tr>
<td>set &#x2F; getMethod(int method)</td>
<td>设置 &#x2F; 获取条目压缩方法</td>
</tr>
<tr>
<td>set &#x2F; getExtra(byte[] extra)</td>
<td>设置 &#x2F; 获取条目扩展数据</td>
</tr>
<tr>
<td>set &#x2F; getComment(String comment)</td>
<td>获取条目注释</td>
</tr>
<tr>
<td>isDirectory()</td>
<td>判断条目是否为目录</td>
</tr>
</tbody></table>
<h3 id="压缩流-示例代码"><a href="#压缩流-示例代码" class="headerlink" title="压缩流 示例代码"></a>压缩流 示例代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">zipFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.zip&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">unzipDir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解压</span></span><br><span class="line"><span class="type">ZipInputStream</span> <span class="variable">zis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(zipFile));</span><br><span class="line">ZipEntry nextEntry;</span><br><span class="line"><span class="keyword">while</span> ((nextEntry = zis.getNextEntry()) != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(unzipDir, nextEntry.getName());</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">directory</span> <span class="operator">=</span> nextEntry.isDirectory();</span><br><span class="line">    <span class="keyword">if</span> (directory) &#123;</span><br><span class="line">        file.mkdirs();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">byte</span>[] bytes = zis.readAllBytes();</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">        fileOutputStream.write(bytes);</span><br><span class="line">        fileOutputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 压缩一个文件</span></span><br><span class="line"><span class="type">File</span> <span class="variable">zipFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.zip&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">ZipOutputStream</span> <span class="variable">zipOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(zipFile));</span><br><span class="line"></span><br><span class="line"><span class="type">ZipEntry</span> <span class="variable">zipEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipEntry</span>(file.getName());</span><br><span class="line"></span><br><span class="line">zipOutputStream.putNextEntry(zipEntry);</span><br><span class="line"></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"><span class="type">byte</span>[] bytes = fileInputStream.readAllBytes();</span><br><span class="line">zipOutputStream.write(bytes);</span><br><span class="line">fileInputStream.close();</span><br><span class="line"></span><br><span class="line">zipOutputStream.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 压缩一个目录</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line">    <span class="type">File</span> <span class="variable">zipDir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(dir.getParentFile(), dir.getName() + <span class="string">&quot;.zip&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">ZipOutputStream</span> <span class="variable">zipOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(zipDir));</span><br><span class="line">    zip(dir, zipOutputStream, dir.getName());</span><br><span class="line">    zipOutputStream.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">zip</span><span class="params">(File dir, ZipOutputStream zipOutputStream, String entryPath)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="keyword">if</span> (dir.isFile()) &#123;</span><br><span class="line">        zipOutputStream.putNextEntry(<span class="keyword">new</span> <span class="title class_">ZipEntry</span>(entryPath));</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(dir);</span><br><span class="line">        zipOutputStream.write(fileInputStream.readAllBytes());</span><br><span class="line">        fileInputStream.close();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    File[] files = dir.listFiles();</span><br><span class="line">    <span class="keyword">if</span> (files != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">            zip(file, zipOutputStream, entryPath.concat(File.separator).concat(file.getName()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Commons-IO-工具类"><a href="#Commons-IO-工具类" class="headerlink" title="Commons-IO 工具类"></a>Commons-IO 工具类</h2><p><a target="_blank" rel="noopener" href="https://commons.apache.org/proper/commons-io/">Commons-IO</a> 是一个 Java 工具类库，提供了很多 IO 操作的封装，如文件操作、流操作、压缩操作、文件匹配操作等等。</p>
<h2 id="Hutool-工具类"><a href="#Hutool-工具类" class="headerlink" title="Hutool 工具类"></a>Hutool 工具类</h2><p><a target="_blank" rel="noopener" href="https://hutool.cn/">Hutool</a> 是一个 Java 工具类库，提供了很多 IO 操作的封装，如文件操作、流操作、压缩操作、文件匹配操作等等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取深度搜索服务</span></span><br><span class="line"><span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;xxxxxx&quot;</span>;</span><br><span class="line"><span class="type">DeepSeekService</span> <span class="variable">deepSeekService</span> <span class="operator">=</span> AIUtil.getDeepSeekService(<span class="keyword">new</span> <span class="title class_">AIConfigBuilder</span>(ModelName.DEEPSEEK.getValue()).setApiKey(key).build());</span><br><span class="line"><span class="type">String</span> <span class="variable">chat</span> <span class="operator">=</span> deepSeekService.chat(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line">System.out.println(chat);</span><br></pre></td></tr></table></figure>

<h2 id="Properties-类"><a href="#Properties-类" class="headerlink" title="Properties 类"></a>Properties 类</h2><p>Properties 是一个双列集合，具有和 Map 同样的特点。</p>
<h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Properties()</td>
<td>创建一个空的 Properties 对象</td>
</tr>
<tr>
<td>Properties(int initialCapacity)</td>
<td>创建一个指定初始容量的 Properties 集合</td>
</tr>
<tr>
<td>Properties(Properties defaults)</td>
<td>创建一个具有默认属性的 Properties 集合</td>
</tr>
</tbody></table>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>setProperty(String key, String value)</td>
<td>设置属性</td>
</tr>
<tr>
<td>load(Reader reader)</td>
<td>从输入流中读取属性列表</td>
</tr>
<tr>
<td>load(InputStream inStream)</td>
<td>从输入流中读取属性列表</td>
</tr>
<tr>
<td>store(Writer writer, String comments)</td>
<td>将属性列表写入输出流</td>
</tr>
<tr>
<td>store(OutputStream out, String comments)</td>
<td>将属性列表写入输出流</td>
</tr>
<tr>
<td>loadFromXML(InputStream in)</td>
<td>从 XML 输入流中读取属性列表</td>
</tr>
<tr>
<td>storeToXML(OutputStream os, String comment)</td>
<td>将属性列表写入 XML 输出流</td>
</tr>
<tr>
<td>storeToXML(OutputStream os, String comment, String encoding)</td>
<td>将属性列表写入 XML 输出流，并指定编码</td>
</tr>
<tr>
<td>storeToXML(OutputStream os, String comment, Charset charset)</td>
<td>将属性列表写入 XML 输出流，并指定编码</td>
</tr>
<tr>
<td>getProperty(String key)</td>
<td>获取属性值</td>
</tr>
<tr>
<td>getProperty(String key, String defaultValue)</td>
<td>获取属性值，如果属性不存在则返回默认值</td>
</tr>
<tr>
<td>propertyNames()</td>
<td>获取所有属性的键</td>
</tr>
<tr>
<td>stringPropertyNames()</td>
<td>获取所有属性的键，并以字符串形式返回</td>
</tr>
<tr>
<td>list(PrintStream out)</td>
<td>将属性列表输出到指定的打印流</td>
</tr>
<tr>
<td>list(PrintWriter out)</td>
<td>将属性列表输出到指定的打印流</td>
</tr>
</tbody></table>
<h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">prop.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">prop.put(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;18&quot;</span>);</span><br><span class="line">System.out.println(prop);   <span class="comment">// &#123;name=Tom, age=18&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">propertiesFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;test.properties&quot;</span>);</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(propertiesFile);</span><br><span class="line"></span><br><span class="line"><span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">prop.load(inputStream);</span><br><span class="line"></span><br><span class="line">System.out.println(prop);</span><br></pre></td></tr></table></figure>

<h2 id="综合练习"><a href="#综合练习" class="headerlink" title="综合练习"></a>综合练习</h2><p>带权重的随机点名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 姓名文件，格式：姓名-权重</span></span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;name.txt&quot;</span>);</span><br><span class="line"><span class="comment">// 读取文件，并转为学生对象</span></span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(file));</span><br><span class="line">List&lt;Student&gt; studentList = br.lines().map(e -&gt; &#123;</span><br><span class="line">    String[] split = e.split(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> split[<span class="number">0</span>];</span><br><span class="line">    <span class="type">double</span> <span class="variable">weight</span> <span class="operator">=</span> Double.parseDouble(split[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(name, weight);</span><br><span class="line">&#125;).toList();</span><br><span class="line">br.close();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算权重和</span></span><br><span class="line"><span class="type">double</span> <span class="variable">weightSum</span> <span class="operator">=</span> studentList.stream().map(Student::getWeight).reduce(<span class="number">0.0</span>, Double::sum);</span><br><span class="line"><span class="comment">// 按照顺序计算每一个学生的权重范围</span></span><br><span class="line"><span class="type">double</span>[] weightArr = <span class="keyword">new</span> <span class="title class_">double</span>[studentList.size()];</span><br><span class="line"><span class="comment">// 用于记录上一个学神的权重</span></span><br><span class="line"><span class="type">double</span> <span class="variable">prevStudentWeight</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; studentList.size(); i++) &#123;</span><br><span class="line">    <span class="comment">// 在当前学生的权重上加上前一个学生的权重就是当前学生的权重范围</span></span><br><span class="line">    weightArr[i] = studentList.get(i).getWeight() / weightSum + prevStudentWeight;</span><br><span class="line">    <span class="comment">// 更新</span></span><br><span class="line">    prevStudentWeight = weightArr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 随机生成一个权重值</span></span><br><span class="line"><span class="type">double</span> <span class="variable">weight</span> <span class="operator">=</span> Math.random();</span><br><span class="line"><span class="comment">// 使用二分查找判断该权重值在哪个权重范围</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> Arrays.binarySearch(weightArr, weight);</span><br><span class="line"><span class="comment">// 根据查找返回的下标计算真实下标</span></span><br><span class="line"><span class="type">int</span> <span class="variable">realIndex</span> <span class="operator">=</span> -index - <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 根据下标获取学生信息</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentList.get(realIndex);</span><br><span class="line">System.out.println(student);</span><br><span class="line"><span class="comment">// 将当前学生的权重在此基础上除以 2</span></span><br><span class="line">student.setWeight(student.getWeight() / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将全部姓名在写回文件</span></span><br><span class="line"><span class="type">BufferedWriter</span> <span class="variable">bufferedWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(file));</span><br><span class="line"><span class="keyword">for</span> (Student s : studentList) &#123;</span><br><span class="line">    bufferedWriter.write(s.getName() + <span class="string">&quot;-&quot;</span> + s.getWeight());</span><br><span class="line">    bufferedWriter.newLine();</span><br><span class="line">&#125;</span><br><span class="line">bufferedWriter.close();</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://codedog1024.github.io">Code Dog</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://codedog1024.github.io/2025/10/18/Java25/">https://codedog1024.github.io/2025/10/18/Java25/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://codedog1024.github.io" target="_blank">代码狗的小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><div class="post-share"><div class="social-share" data-image="/img/06.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/10/17/Java24/" title="Java File"><img class="cover" src="/img/09.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Java File</div></div><div class="info-2"><div class="info-item-1">File 类File 类是 Java 中最常用的类之一，用于操作文件。根据文件路径来创建 File 对象。然后通过 File 对象，来获取文件信息，或者操作文件。File 其实也可以获取文件夹，毕竟文件夹也可以看做是文件。 File 类的构造方法   构造方法 描述    File(String pathname) 根据文件路径创建 File 对象   File(String parent, String child) 根据父目录路径和文件名创建 File 对象   File(File parent, String child) 根据父目录 File 对象和文件名创建 File 对象   123456789101112131415161718// 根据全路径获取文件File file1 = new File(&quot;D:\\java-study\\test.txt&quot;);System.out.println(file1);                      // D:\java-study\test.txt//...</div></div></div></a><a class="pagination-related" href="/2025/10/22/Java26/" title="Java 多线程"><img class="cover" src="/img/10.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Java 多线程</div></div><div class="info-2"><div class="info-item-1">多线程线程是程序执行的最小单位，是进程中的一个执行路径。Java 语言内置了对多线程编程的支持，使得开发者可以轻松地创建和管理线程，从而实现并发执行任务，提高程序的性能和响应能力。 并发和并行并发：在单个处理器上，通过时间片轮转等方式实现多个线程交替执行。并行：在多处理器系统上，多个线程可以同时执行。 实现方式继承 Thread 类Thread 类，是 Java 中用于创建和管理线程的核心类。通过继承 Thread 类，可以创建自定义的线程类，并重写其 run() 方法来定义线程执行的任务。但是在启动线程时，不要直接调用 run() 方法，而是调用 start() 方法来启动线程。 12345678public class MyThread extends Thread &#123;    @Override    public void run() &#123;        for (int i = 0; i &lt; 100; i++) &#123;            System.out.println(getName() + &quot; &quot; +i); ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/08/18/Java01/" title="Java 入门"><img class="cover" src="/img/07.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-18</div><div class="info-item-2">Java 入门</div></div><div class="info-2"><div class="info-item-1">Java 学习介绍略。 人机交互-图形化界面的小故事 最初的计算机并没有图形化的操作界面，只有一个可以输入命令的黑框(终端)，用户需要通过输入命令来操作计算机完成对应的操作。 而后，施乐发布了世界上第一款具有图形化界面的计算机。 截至至今，终端仍然被保留在计算机中，如 Windows 中的 CMD(命令提示符)，Linux 和 MacOS 中的 Terminal。  打开 CMD win + r 输入 cmd，点击确定  常用 CMD 命令   命令 作用 示例    盘符名 + 冒号 切换盘符 D:   dir 显示当前目录下的所有文件和文件夹 dir   cd 目录 切换目录 cd D:\Steam   cd .. 返回上一级目录 cd ..   cd \ 切换至根目录 cd \   exit 退出 CMD exit   cls 清空屏幕 cls   练习-利用 CMD 打开 QQ 并配置环境变量利用 CMD 打开 QQ 找到 QQ 的安装目录，如 C:\\Program Files (x86)\\Tencent\\QQ。 打开 CMD 并进入 QQ 的安装目录，cd...</div></div></div></a><a class="pagination-related" href="/2025/08/21/Java04/" title="Java 判断和循环"><img class="cover" src="/img/06.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-21</div><div class="info-item-2">Java 判断和循环</div></div><div class="info-2"><div class="info-item-1">流程控制语句-顺序结构从上至下依次执行。 流程控制语句-分支结构if 第一种格式1234// 当条件为的值为 true 时，代码才会执行if (条件) &#123;    // 条件为真时执行的代码&#125;  代码示例12345678Scanner sc = new Scanner(System.in);System.out.print(&quot;请输入年龄：&quot;);int age = sc.nextInt();if (age &gt;= 18) &#123;    System.out.println(&quot;你已成年&quot;);&#125;System.out.println(&quot;继续执行~&quot;);sc.close();  注意事项 若大括号内的代码只有一行，大括号可省略(不建议)。 对于布尔类型的变量进行判断时，直接使用变量即可，无需比较，如：true == true。  if 第二种格式123456// 当条件为的值为 true 时，执行 if 后大括号中的代码，反之执行 else 后大括号中的代码if (条件) &#123;   ...</div></div></div></a><a class="pagination-related" href="/2025/08/26/Java08/" title="Java 综合练习"><img class="cover" src="/img/03.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-26</div><div class="info-item-2">Java 综合练习</div></div><div class="info-2"><div class="info-item-1">买飞机票1234567891011121314151617181920212223242526272829public static void main(String[] args) &#123;    Scanner scanner = new Scanner(System.in);    System.out.print(&quot;请输入机票原价：&quot;);    double price = scanner.nextDouble();    System.out.print(&quot;请输入月份：&quot;);    int month = scanner.nextInt();    System.out.print(&quot;请选择头等舱或经济舱(0:头等舱,1:经济舱)：&quot;);    int type = scanner.nextInt();    if (month &gt;= 5 &amp;&amp; month &lt;= 10) &#123;        price = getPrice(type, price, 0.9,...</div></div></div></a><a class="pagination-related" href="/2025/08/18/Java02/" title="Java 基础语法"><img class="cover" src="/img/04.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-18</div><div class="info-item-2">Java 基础语法</div></div><div class="info-2"><div class="info-item-1">注释为什么要有注释注释就是对代码进行解释说明的文字，通过注释可以快速了解一个程序的功能和实现思路。 注释分类 单行注释：// 注释内容。 多行注释：/* 注释内容 */。 文档注释：/** 注释内容 */。  代码示例1234567891011121314// 这是单行注释/*这是多行注释可以写多行内容*//** * 这是文档注释 * 可以用于生成文档 * @author CodeDog * @version 1.0 * @since 2025-08-18 */  注意事项 注释不会影响程序的运行，编译器会自动忽略注释内容。若代码被注释，则该代码不会被执行。 多行注释不可以进行嵌套。  关键字什么是关键字关键字就是在 Java 中被赋予了特殊含义的单词，如：class、public、for 等。 关键字 classclass：用于创建&#x2F;定义一个类。被 class 修饰的名字称为类名 1234// HelloWorld 就是类名public class HelloWorld...</div></div></div></a><a class="pagination-related" href="/2025/08/24/Java07/" title="Java 方法"><img class="cover" src="/img/08.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-24</div><div class="info-item-2">Java 方法</div></div><div class="info-2"><div class="info-item-1">什么是方法方法是指一组执行特定任务的代码块，可以被重复调用。它通常包含方法名、参数列表和返回值类型。通过定义方法，可以提高代码的复用性和可维护性。方法是程序中最小的执行单元。 方法定义和调用方法定义格式123456// 访问权限修饰符还未学到，目前就用 public// static 修饰符也未学到，默认都加 static访问权限修饰符 [static] 返回值类型 方法名(参数列表)&#123;    方法体;    [return 返回值];&#125;  方法调用格式1方法名(参数列表);  代码示例1234567891011121314public static void main(String[] args) &#123;    // 调用方法    sayHello();&#125;// 定义方法// 访问修饰符 public// 静态修饰符 static 加个 static 的方法可以直接调用，无需创建对象，以后会学到// 返回值类型 void 没有返回值// 方法名 sayHello 小驼峰// 参数列表 无参数public static void...</div></div></div></a><a class="pagination-related" href="/2025/08/24/Java06/" title="Java 数组"><img class="cover" src="/img/13.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-24</div><div class="info-item-2">Java 数组</div></div><div class="info-2"><div class="info-item-1">数组的概述和静态初始化什么是数组数组是 Java 中最常用的数据结构，可以存储多个相同类型的数据。通过隐式数据类型转化，即便数据类型不同，也可以存储。 数组的定义 格式一：数据类型[] 数组名 格式二：数据类型 数组名[]  静态初始化在定义数组时，就为数组赋值。静态初始化时，数组的长度即为元素的个数，且不能改变。 代码示例12345678// 完整格式int[] array1 = new int[]&#123;1, 2, 3&#125;;// 简写int[] array2 = &#123;4, 5, 6&#125;;// 字符串数组String[] array3 = &#123;&quot;张三&quot;, &quot;李四&quot;, &quot;王五&quot;&#125;;// 小数数组double[] array4 = &#123;1.1, 2.2, 3.3&#125;;  数组的地址值和元素访问数组的地址值数组其实是一个引用数据类型，所以不能像基本数据类型那样直接通过变量名访问值。所以直接打印数组变量时，得到的 [I@6acbcfc0...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Code Dog</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#IO-%E6%B5%81"><span class="toc-number">1.</span> <span class="toc-text">IO 流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%B5%81"><span class="toc-number">3.</span> <span class="toc-text">字节流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FileOutputStream"><span class="toc-number">4.</span> <span class="toc-text">FileOutputStream</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FileOutputStream-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">FileOutputStream 构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileOutputStream-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">FileOutputStream 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileOutputStream-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">4.3.</span> <span class="toc-text">FileOutputStream 示例代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FileInputStream"><span class="toc-number">5.</span> <span class="toc-text">FileInputStream</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FileInputStream-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">5.1.</span> <span class="toc-text">FileInputStream 构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileInputStream-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">5.2.</span> <span class="toc-text">FileInputStream 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileInputStream-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">5.3.</span> <span class="toc-text">FileInputStream 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D"><span class="toc-number">5.4.</span> <span class="toc-text">文件拷贝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#try-with-resources-%E8%AF%AD%E5%8F%A5"><span class="toc-number">5.5.</span> <span class="toc-text">try-with-resources 语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%B1%E7%A0%81"><span class="toc-number">5.6.</span> <span class="toc-text">乱码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E5%92%8C%E8%A7%A3%E7%A0%81"><span class="toc-number">5.7.</span> <span class="toc-text">编码和解码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%B5%81"><span class="toc-number">6.</span> <span class="toc-text">字符流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FileWriter"><span class="toc-number">7.</span> <span class="toc-text">FileWriter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FileWriter-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">7.1.</span> <span class="toc-text">FileWriter 构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileWriter-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">7.2.</span> <span class="toc-text">FileWriter 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileWriter-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">7.3.</span> <span class="toc-text">FileWriter 示例代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FileReader"><span class="toc-number">8.</span> <span class="toc-text">FileReader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FileReader-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">8.1.</span> <span class="toc-text">FileReader 构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileReader-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">8.2.</span> <span class="toc-text">FileReader 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FileReader-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">8.3.</span> <span class="toc-text">FileReader 示例代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%B5%81%E5%8E%9F%E7%90%86"><span class="toc-number">9.</span> <span class="toc-text">字符流原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%B5%81-%E7%BB%83%E4%B9%A0"><span class="toc-number">10.</span> <span class="toc-text">字符流 练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-number">11.</span> <span class="toc-text">缓冲流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-number">12.</span> <span class="toc-text">字节缓冲流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E7%BC%93%E5%86%B2%E6%B5%81-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">12.1.</span> <span class="toc-text">字节缓冲流 构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E7%BC%93%E5%86%B2%E6%B5%81-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">12.2.</span> <span class="toc-text">字节缓冲流 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E7%BC%93%E5%86%B2%E6%B5%81-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">12.3.</span> <span class="toc-text">字节缓冲流 代码示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-number">13.</span> <span class="toc-text">字符缓冲流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E6%B5%81-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">13.1.</span> <span class="toc-text">字符缓冲流 构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E6%B5%81-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">13.2.</span> <span class="toc-text">字符缓冲流 常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#BufferedReader-%E7%8B%AC%E6%9C%89%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">13.2.1.</span> <span class="toc-text">BufferedReader 独有的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BufferedWriter-%E7%8B%AC%E6%9C%89%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">13.2.2.</span> <span class="toc-text">BufferedWriter 独有的方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E6%B5%81-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">13.3.</span> <span class="toc-text">字符缓冲流 代码示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E6%B5%81-%E7%BB%83%E4%B9%A0"><span class="toc-number">14.</span> <span class="toc-text">字符缓冲流 练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%B5%81"><span class="toc-number">15.</span> <span class="toc-text">转换流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%B5%81-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">15.1.</span> <span class="toc-text">转换流 构造方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-number">15.1.1.</span> <span class="toc-text">转换输入流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">15.1.2.</span> <span class="toc-text">转换输出流</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%B5%81-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">15.2.</span> <span class="toc-text">转换流 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%B5%81-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">15.3.</span> <span class="toc-text">转换流 代码示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E6%B5%81"><span class="toc-number">16.</span> <span class="toc-text">序列化流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E6%B5%81-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">16.1.</span> <span class="toc-text">序列化流 构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E6%B5%81-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">16.2.</span> <span class="toc-text">序列化流 常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-number">16.2.1.</span> <span class="toc-text">序列化输入流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">16.2.2.</span> <span class="toc-text">序列化输出流</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E6%B5%81-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">16.3.</span> <span class="toc-text">序列化流 代码示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E6%B5%81-%E7%BB%83%E4%B9%A0"><span class="toc-number">16.4.</span> <span class="toc-text">序列化流 练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%B5%81"><span class="toc-number">17.</span> <span class="toc-text">打印流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%B5%81-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">17.1.</span> <span class="toc-text">打印流 构造方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%89%93%E5%8D%B0%E6%B5%81"><span class="toc-number">17.1.1.</span> <span class="toc-text">字节打印流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%89%93%E5%8D%B0%E6%B5%81"><span class="toc-number">17.1.2.</span> <span class="toc-text">字符打印流</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%B5%81-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">17.2.</span> <span class="toc-text">打印流 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%B5%81-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">17.3.</span> <span class="toc-text">打印流 代码示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E6%B5%81"><span class="toc-number">18.</span> <span class="toc-text">压缩流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E6%B5%81-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">18.1.</span> <span class="toc-text">压缩流 构造方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipInputStream-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">18.1.1.</span> <span class="toc-text">ZipInputStream 构造方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipOutputStream-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">18.1.2.</span> <span class="toc-text">ZipOutputStream 构造方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E6%B5%81-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">18.2.</span> <span class="toc-text">压缩流 常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipInputStream-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">18.2.1.</span> <span class="toc-text">ZipInputStream 常用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipOutputStream-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">18.2.2.</span> <span class="toc-text">ZipOutputStream 常用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipEntry"><span class="toc-number">18.2.3.</span> <span class="toc-text">ZipEntry</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E6%B5%81-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">18.3.</span> <span class="toc-text">压缩流 示例代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Commons-IO-%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">19.</span> <span class="toc-text">Commons-IO 工具类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hutool-%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">20.</span> <span class="toc-text">Hutool 工具类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Properties-%E7%B1%BB"><span class="toc-number">21.</span> <span class="toc-text">Properties 类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">21.1.</span> <span class="toc-text">构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">21.2.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">21.3.</span> <span class="toc-text">代码示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E7%BB%83%E4%B9%A0"><span class="toc-number">22.</span> <span class="toc-text">综合练习</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/10/26/Java27/" title="Java 网络编程"><img src="/img/02.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java 网络编程"/></a><div class="content"><a class="title" href="/2025/10/26/Java27/" title="Java 网络编程">Java 网络编程</a><time datetime="2025-10-26T13:17:33.000Z" title="发表于 2025-10-26 21:17:33">2025-10-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/22/Java26/" title="Java 多线程"><img src="/img/10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java 多线程"/></a><div class="content"><a class="title" href="/2025/10/22/Java26/" title="Java 多线程">Java 多线程</a><time datetime="2025-10-22T13:59:23.000Z" title="发表于 2025-10-22 21:59:23">2025-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/18/Java25/" title="Java IO 流"><img src="/img/06.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java IO 流"/></a><div class="content"><a class="title" href="/2025/10/18/Java25/" title="Java IO 流">Java IO 流</a><time datetime="2025-10-18T13:14:13.000Z" title="发表于 2025-10-18 21:14:13">2025-10-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/17/Java24/" title="Java File"><img src="/img/09.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java File"/></a><div class="content"><a class="title" href="/2025/10/17/Java24/" title="Java File">Java File</a><time datetime="2025-10-17T12:18:56.000Z" title="发表于 2025-10-17 20:18:56">2025-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/16/Java23/" title="Java 异常"><img src="/img/07.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java 异常"/></a><div class="content"><a class="title" href="/2025/10/16/Java23/" title="Java 异常">Java 异常</a><time datetime="2025-10-16T12:50:40.000Z" title="发表于 2025-10-16 20:50:40">2025-10-16</time></div></div></div></div></div></div></main><footer id="footer" style="background: ture;"><div id="footer-wrap"><div class="copyright">&copy;2025 By Code Dog</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false 
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>