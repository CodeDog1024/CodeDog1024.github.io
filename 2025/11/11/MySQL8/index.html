<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MySQL 索引 | 代码狗的小屋</title><meta name="author" content="Code Dog"><meta name="copyright" content="Code Dog"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="索引前置准备Linux 服务器 云服务 虚拟机  Linux 安装 Mysql 使用终端工具连接云服务器，并安装 MySQL apt update apt install mysql-server   MySQL 默认启动，如果未启动，请执行以下命令 systemctl start mysql systemctl status mysql   修改 MySQL 密码，默认情况下，root 用户可能">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 索引">
<meta property="og:url" content="https://codedog1024.github.io/2025/11/11/MySQL8/index.html">
<meta property="og:site_name" content="代码狗的小屋">
<meta property="og:description" content="索引前置准备Linux 服务器 云服务 虚拟机  Linux 安装 Mysql 使用终端工具连接云服务器，并安装 MySQL apt update apt install mysql-server   MySQL 默认启动，如果未启动，请执行以下命令 systemctl start mysql systemctl status mysql   修改 MySQL 密码，默认情况下，root 用户可能">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://codedog1024.github.io/img/01.jpg">
<meta property="article:published_time" content="2025-11-11T15:37:21.000Z">
<meta property="article:modified_time" content="2025-11-16T16:28:44.822Z">
<meta property="article:author" content="Code Dog">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://codedog1024.github.io/img/01.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "MySQL 索引",
  "url": "https://codedog1024.github.io/2025/11/11/MySQL8/",
  "image": "https://codedog1024.github.io/img/01.jpg",
  "datePublished": "2025-11-11T15:37:21.000Z",
  "dateModified": "2025-11-16T16:28:44.822Z",
  "author": [
    {
      "@type": "Person",
      "name": "Code Dog",
      "url": "https://codedog1024.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://codedog1024.github.io/2025/11/11/MySQL8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 1
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL 索引',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/01.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">代码狗的小屋</span></a><a class="nav-page-title" href="/"><span class="site-name">MySQL 索引</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">MySQL 索引</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-11-11T15:37:21.000Z" title="发表于 2025-11-11 23:37:21">2025-11-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-16T16:28:44.822Z" title="更新于 2025-11-17 00:28:44">2025-11-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="索引前置准备"><a href="#索引前置准备" class="headerlink" title="索引前置准备"></a>索引前置准备</h2><h3 id="Linux-服务器"><a href="#Linux-服务器" class="headerlink" title="Linux 服务器"></a>Linux 服务器</h3><ol>
<li>云服务</li>
<li>虚拟机</li>
</ol>
<h3 id="Linux-安装-Mysql"><a href="#Linux-安装-Mysql" class="headerlink" title="Linux 安装 Mysql"></a>Linux 安装 Mysql</h3><ol>
<li>使用终端工具连接云服务器，并安装 MySQL<ul>
<li>apt update</li>
<li>apt install mysql-server</li>
</ul>
</li>
<li>MySQL 默认启动，如果未启动，请执行以下命令<ul>
<li>systemctl start mysql</li>
<li>systemctl status mysql</li>
</ul>
</li>
<li>修改 MySQL 密码，默认情况下，root 用户可能使用了一种叫做 <code>auth_socket</code> 的插件进行认证。这种认证方式不要求密码，而是检查当前系统用户是否与MySQL用户匹配。如果系统用户是root，那么就可以无需密码直接登录。<ul>
<li>mysql -u root -p</li>
<li>ALTER USER ‘root‘@’localhost’ IDENTIFIED WITH mysql_native_password BY ‘xxxxxx’;</li>
</ul>
</li>
<li>创建用户，并授权<ul>
<li>CREATE USER ‘root‘@’xxx.xxx.xxx.xxx’ IDENTIFIED BY ‘xxxxxx’;</li>
<li>GRANT ALL ON xxx.xxx TO ‘root‘@’xxx.xxx.xxx.xxx’;</li>
</ul>
</li>
</ol>
<h3 id="连接不上原因"><a href="#连接不上原因" class="headerlink" title="连接不上原因"></a>连接不上原因</h3><ol>
<li>查看 MySQL 服务器的状态，是否启动了</li>
<li>MySQL 密码是否正确</li>
<li>查看服务器的网络安全组，是否开通了 3306 端口，是否允许本机 IP 访问</li>
<li>查看 MySQL 服务器的配置文件 <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>，查看 <code>bind-address</code> 是否是 <code>0.0.0.0</code></li>
</ol>
<h2 id="索引概述"><a href="#索引概述" class="headerlink" title="索引概述"></a>索引概述</h2><p>索引是一种数据库结构，它可以提高数据库的查询效率。除了保存原始数据之外，数据库还需要维护<code>索引</code>，索引指向原始数据，通过查找索引，可以快速找到原始数据。</p>
<h3 id="有无索引"><a href="#有无索引" class="headerlink" title="有无索引"></a>有无索引</h3><ol>
<li>全表扫描：当查询的字段不在索引中时，数据库会全表扫描，即从表中的第一行开始，顺序地读取每一行，直到找到匹配的行。</li>
<li>索引扫描：当查询的字段在索引中时，数据库会通过索引来查找匹配的行。索引扫描比全表扫描更快，因为它可以跳过一些行。</li>
</ol>
<h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><ol>
<li>通过索引可以提高查询效率，且通过索引进行排序可以减少排序的开销。</li>
<li>但是索引需要占用额外的存储空间，且数据库需要维护索引，因此在更新表时，更新索引也会有额外的开销。</li>
</ol>
<h2 id="索引结构"><a href="#索引结构" class="headerlink" title="索引结构"></a>索引结构</h2><p>索引实在存储引擎层实现的，因此，根据不同的存储引擎，索引结构也不同。</p>
<table>
<thead>
<tr>
<th>索引结构</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>B+树索引</td>
<td>最常见的索引，大部分引擎都支持 B+树 索引</td>
</tr>
<tr>
<td>Hash索引</td>
<td>底层使用 Hash 表实现，只有精确匹配索引列时才有效，不支持范围查询</td>
</tr>
<tr>
<td>R-树索引</td>
<td>空间索引，是 MyISAM 引擎的一个特殊索引类型，用于地理空间数据类型</td>
</tr>
<tr>
<td>Full Text索引</td>
<td>全文索引是一种通过倒排索引，快速匹配文档的方式。类似于 Lucene、Solr、ES 等全文检索引擎</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>索引结构</th>
<th>InnoDB</th>
<th>MyISAM</th>
<th>Memory</th>
</tr>
</thead>
<tbody><tr>
<td>B+树索引</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>Hash索引</td>
<td></td>
<td></td>
<td>√</td>
</tr>
<tr>
<td>R-树索引</td>
<td></td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>Full Text索引</td>
<td>√</td>
<td>√</td>
<td></td>
</tr>
</tbody></table>
<h3 id="B-树索引"><a href="#B-树索引" class="headerlink" title="B+树索引"></a>B+树索引</h3><p>B 树：多路平衡查找树，每一个节点最多有 m 个 key, 有 m + 1 个指针，每个指针都对应一个子树。当添加元素时，会按照 B 树 的规则进行添加，当添加的元素个数超过 m 个时，会进行分裂，即节点会将中间元素存入父节点中，左边的元素为左子节点，右边的元素为右子节点。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 假如有以下节点，向其中添加元素 500</span></span><br><span class="line"><span class="comment">-- [100, 200, 300, 400]</span></span><br><span class="line"><span class="comment">-- 1. 添加元素 500 → [100, 200, 300, 400，500]</span></span><br><span class="line"><span class="comment">-- 2. 分裂，中间元素 300 添加到父节点，左边的元素为左子节点，右边的元素为右子节点。</span></span><br><span class="line"><span class="comment">-- 3.        [300]</span></span><br><span class="line"><span class="comment">--         /       \</span></span><br><span class="line"><span class="comment">--   [100, 200] [400, 500]  </span></span><br></pre></td></tr></table></figure>

<p>B+树：B+树，是在 B树基础上进行的优化，在 B+树中，<code>除叶子节点以外的其他节点，均不保存数据，只是作为索引节点</code>，保存索引数据。因此，所有的索引节点也都会有一个与之对应的叶子节点。在所有的叶子节点中，也存在一个<code>单向链表连接所有的叶子节点</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 假如有以下节点，向其中添加元素 500</span></span><br><span class="line"><span class="comment">-- [100, 200, 300, 400]</span></span><br><span class="line"><span class="comment">-- 1. 添加元素 500 → [100, 200, 300, 400，500]</span></span><br><span class="line"><span class="comment">-- 2. 分裂，中间元素 300 添加到父节点，左边的元素为左子节点，右边的元素为右子节点。</span></span><br><span class="line"><span class="comment">-- 3.        [300]</span></span><br><span class="line"><span class="comment">--         /       \</span></span><br><span class="line"><span class="comment">--   [100, 200] → [300，400, 500]  </span></span><br></pre></td></tr></table></figure>

<p>MySQL 中的 B+树 在原 B+树 基础上又添加了一个链表指针，即让每个叶子节点都指向自己相邻的叶子节点。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--             [300]</span></span><br><span class="line"><span class="comment">--          /         \</span></span><br><span class="line"><span class="comment">--   [100, 200] ←→ [300，400, 500]  </span></span><br></pre></td></tr></table></figure>

<h3 id="Hash-索引"><a href="#Hash-索引" class="headerlink" title="Hash 索引"></a>Hash 索引</h3><p>Hash 索引是一种基于哈希函数的数据结构，先将索引字段的值作为键值，计算出每个键值的哈希值，存入哈希表中，并且在哈希表中保存原始数据的位置。</p>
<p>特点：</p>
<ol>
<li>只支持等值比较，如：<code>=</code>、<code>in</code>，不支持范围查询，如：<code>&gt;</code>、<code>&lt;</code>、<code>between</code>等。</li>
<li>无法利用索引进行排序</li>
<li>查询效率高于 B+树索引</li>
</ol>
<p>在 MySQL 中，只有 Memory 存储引擎支持 Hash 索引。但是 InnoDB 存储引擎具有自适应 Hash 功能，可以根据 B+树索引在指定条件下自动构建。</p>
<h3 id="为什么-InnoDB-存储引擎使用-B-树索引"><a href="#为什么-InnoDB-存储引擎使用-B-树索引" class="headerlink" title="为什么 InnoDB 存储引擎使用 B+树索引"></a>为什么 InnoDB 存储引擎使用 B+树索引</h3><ol>
<li>B+树相比于 二叉树、红黑树等结构，在相同数据量的情况下，层级更少，查询效率更高。</li>
<li>非叶子节点保存在<code>页</code>中，而页的大小较小，B树的非叶子节点也要保存原始数据，那么在同等存储空间下，B+树存储的索引数量比B树要多。</li>
</ol>
<h2 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
<th>个数</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>主键索引</td>
<td>针对于表中主键所创建的索引</td>
<td>主键会自动创建索引，只能有一个</td>
<td>PRIMARY</td>
</tr>
<tr>
<td>唯一索引</td>
<td>索引中不允许有重复的值</td>
<td>可以有多个</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>普通索引</td>
<td>快速定位指定数据</td>
<td>可以有多个</td>
<td></td>
</tr>
<tr>
<td>全文索引</td>
<td>全文索引匹配的是文本中的关键字</td>
<td>可以有多个</td>
<td>FULLTEXT</td>
</tr>
</tbody></table>
<h3 id="聚集索引和非聚集索引"><a href="#聚集索引和非聚集索引" class="headerlink" title="聚集索引和非聚集索引"></a>聚集索引和非聚集索引</h3><p>在 InnoDB 中，根据索引的存储形式，又可以分为两类：</p>
<table>
<thead>
<tr>
<th>索引存储形式</th>
<th>索引类型</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>聚集索引</td>
<td>索引和数据<code>一起存储</code>，索引中存储的是<code>数据本身</code></td>
<td>有且只能一个</td>
</tr>
<tr>
<td>二级索引(非聚集索引)</td>
<td>索引和数据<code>分开存储</code>，索引中存储的是数据的<code>主键值</code></td>
<td>可以有多个</td>
</tr>
</tbody></table>
<p>聚集索引有且只有一个，所以不需要我们自己创建，默认的规则为：</p>
<ol>
<li>如果存在主键，主键索引就是聚集索引</li>
<li>如果不存在主键，则使用第一个唯一索引作为聚集索引</li>
<li>如果以上均不存在，则会自动生成一个 rowid 列作为聚集索引</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 现在有一个 users 表，其中包含 id, name, age, email 四个字段，id 为主键</span></span><br><span class="line"><span class="comment">-- 1. 存在主键，那么 id 就是聚集索引，此时该索引结构中，每个叶子节点都会保存原始数据</span></span><br><span class="line"><span class="comment">-- 2. 给字段 name 添加普通索引，则 name 就是二级索引，该索引结构中，每个叶子节点都会保存原始数据的主键值</span></span><br><span class="line"><span class="comment">-- 3. 执行 select * from users where name = &#x27;张三&#x27;; 语句，查询条件为 name 列，会通过二级索引中的 name 列找到原始数据的主键值，然后通过主键值，在聚集索引中查找原始数据</span></span><br></pre></td></tr></table></figure>

<h3 id="回表"><a href="#回表" class="headerlink" title="回表"></a>回表</h3><ul>
<li>通过非聚集索引查询数据，得到原始数据主键值，然后通过主键值，在聚集索引中查找原始数据的操作称为：<code>索引回表</code></li>
</ul>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><p>以下两个 SQL 语句，执行效率哪个更高？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t_user <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t_user <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 第一个语句执行效率更高，因为使用了聚集索引，可以直接获取数据</span></span><br><span class="line"><span class="comment">-- 第二个语句执行效率较低，因为使用了非聚集索引，需要通过索引回表获取数据</span></span><br></pre></td></tr></table></figure>

<p>InnoDB 主键索引的 B+树 高度是多少？</p>
<p>主键索引为聚集索引，索引保存的是主键值，除叶子节点外，非叶子节点不保存数据，只保存主键值和指针，且指针个数 &#x3D; 主键值个数 + 1，<br>假设主键值的数据类型为 int，那么一个主键值所占用的内存为 4bit，一个指针占用 6bit, 而每个节点存储在<code>页</code>中，一个页大小为 16KB，那么根据公式 m * 4 + (m + 1) * 6 &#x3D; 16 * 1024，可以得到 m &#x3D; 1637，那么一个节点可以存储 1637 个主键值和 1638 个指针。如果每条数据大小为 1KB，那么一页可以存储 16 个数据。如果该 B+树有两层，则可以存储 16 * 1637 &#x3D; 26192 条数据。</p>
<h2 id="索引语法"><a href="#索引语法" class="headerlink" title="索引语法"></a>索引语法</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://codedog1024.github.io">Code Dog</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://codedog1024.github.io/2025/11/11/MySQL8/">https://codedog1024.github.io/2025/11/11/MySQL8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://codedog1024.github.io" target="_blank">代码狗的小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post-share"><div class="social-share" data-image="/img/01.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/11/09/MySQL7/" title="MySQL 存储引擎"><img class="cover" src="/img/13.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">MySQL 存储引擎</div></div><div class="info-2"><div class="info-item-1">MySQL 体系结构图 客户端连接器：Native C API、JDBC、ODBC、.NET、PHP、Python、Ruby、Cobol 等 MySQL 服务端： 连接层：连接池 服务层：SQL 接口、解析器、查询优化器、缓存 引擎层：可插拔存储引擎 存储层：数据文件、索引文件、数据结构、数据结构描述文件    存储引擎简介存储引擎是 MySQL 数据库管理系统中的核心部分，负责处理数据存储和检索。存储引擎提供了一种机制，将数据存储在数据库管理系统中，并允许用户使用各种查询语句来检索数据。存储引擎是基于表的，而不是库，所以同一个库中的不同表可以有不同的存储引擎。  查看数据库支持的存储引擎  SHOW ENGINES;   设置存储引擎  CREATE TABLE table_name (……) ENGINE&#x3D;[存储引擎名];    123456789101112131415161718192021-- 查看建表语句-- ENGINE=InnoDB 默认存储引擎为 InnoDBSHOW CREATE TABLE account;--...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/10/29/MySQL1/" title="MySQL 概述"><img class="cover" src="/img/09.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-29</div><div class="info-item-2">MySQL 概述</div></div><div class="info-2"><div class="info-item-1">概述数据库：数据库就是一个仓库，将数据进行有组织的存储管理。 MySQL: 是一个关系型数据库管理系统（Relational Database Management System，RDBMS），MySQL 并不是数据库。 SQL：SQL是Structured Query Language的缩写，是一种数据库查询和程序设计语言。我们需要通过编写 SQL 语句来操作数据库。 数据库分类   数据库 类型    Oracle 关系型数据库   MySQL 关系型数据库   SQL Server 关系型数据库   PostgreSQL 关系型数据库   IBM DB2 关系型数据库   SQLite 关系型数据库   MongoDB 非关系型数据库   Microsoft Azure SQL Database 关系型数据库   Hive 关系型数据库   下载安装 MySQL社区版 下载地址 启动、停止 启动命令：net start 服务名 停止命令：net stop 服务名  连接 使用 MySQL 提供的命令行工具 使用 windows 终端，执行 MySQL [-h...</div></div></div></a><a class="pagination-related" href="/2025/10/29/MySQL2/" title="MySQL SQL"><img class="cover" src="/img/06.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-29</div><div class="info-item-2">MySQL SQL</div></div><div class="info-2"><div class="info-item-1">SQL 通用语法 SQL 语句可以单行或多行编写，以分号结尾。 SQL 中应使用空格来格式化语句，提高可读性。 SQL 语句大小写不敏感，但建议使用大写。 注释： 单行注释：--、# 多行注释：/* */    SQL 分类   分类 全称 描述    DDL Data Definition Language 数据定义语言，用于定义数据库对象，如表、索引、视图、存储过程、函数等   DML Data Manipulation Language 数据操作语言，用于对数据库中的数据进行增删改   DQL Data Query Language 数据查询语言，用于查询数据库中的数据   DCL Data Control Language 数据控制语言，用于控制数据库的访问权限   DDL操作数据库   功能 SQL 语法 描述    查询 SHOW DATABASES; 查询全部数据库   查询 SELECT DATABASE(); 查询当前数据库   创建 CREATE DATABASE [IF NOT EXISTS] 数据库名 [DEFAULT CHARACTER SET...</div></div></div></a><a class="pagination-related" href="/2025/11/06/MySQL4/" title="MySQL 约束"><img class="cover" src="/img/10.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-06</div><div class="info-item-2">MySQL 约束</div></div><div class="info-2"><div class="info-item-1">约束约束：作用在表中的字段上，保证字段的数据满足要求，用于保证数据的正确型、有效性、安全性。 分类   约束 作用 关键字    主键 该值必须唯一、不重复、不能为 NULL PRIMARY KEY   外键 该值必须在指定表中存在 FOREIGN KEY   唯一 该值必须唯一、不重复 UNIQUE   非空 该值不能为空 NOT NULL   默认值 若为指定该值，则使用默认值 DEFAULT   检查 检查字段的值 CHECK   约束代码示例123456789101112CREATE TABLE users (    -- 主键，并且自增    id INT PRIMARY KEY AUTO_INCREMENT COMMENT &#x27;ID&#x27;,    -- 唯一，并且不能为空    name VARCHAR(10) NOT NULL UNIQUE COMMENT &#x27;姓名&#x27;,    -- 检查，年龄必须大于 0 且小于 120    age INT CHECK ( age &gt; 0 AND age &lt; 120) COMMENT...</div></div></div></a><a class="pagination-related" href="/2025/11/07/MySQL5/" title="MySQL 多表查询"><img class="cover" src="/img/04.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-07</div><div class="info-item-2">MySQL 多表查询</div></div><div class="info-2"><div class="info-item-1">多表关系在实际开发中，每个表之间都存在一些关系，基本上分为三种：一对一、一对多(多对一)、多对多。 一对一一对一关系，比如：学生表和档案表，对于学生来说，一个学生只能拥有一份档案，而档案只能属于一个学生，这就是一对一。 12345678910111213CREATE TABLE student (    id   INT PRIMARY KEY AUTO_INCREMENT COMMENT &#x27;ID&#x27;,    name VARCHAR(10) UNIQUE NOT NULL COMMENT &#x27;姓名&#x27;) COMMENT &#x27;学生表&#x27;;CREATE TABLE profile (    id   INT PRIMARY KEY AUTO_INCREMENT COMMENT &#x27;ID&#x27;,    phone CHAR(11) UNIQUE COMMENT &#x27;电话号&#x27;,    address VARCHAR(100) COMMENT &#x27;家庭住址&#x27;,    --...</div></div></div></a><a class="pagination-related" href="/2025/11/06/MySQL3/" title="MySQL 函数"><img class="cover" src="/img/08.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-06</div><div class="info-item-2">MySQL 函数</div></div><div class="info-2"><div class="info-item-1">函数函数是一段已经被编写好，可以直接使用的代码片段。MySQL 中内置了很多的函数，我们可以使用这些函数来完成一些简单的任务。 字符串函数常用字符串函数   函数 描述    CONCAT(str1, str2, …) 连接字符串   LOWER(str) 将字符串转换为小写   UPPER(str) 将字符串转换为大写   LPAD(str, len, pad_str) 左填充字符串   RPAD(str, len, pad_str) 右填充字符串   TRIM(str) 去掉字符串两侧的空格   SUBSTRING(str, start, len) 截取字符串   REPLACE(str, old_str, new_str) 替换字符串   LENGTH(str) 返回字符串的长度   LOCATE(substr, str) 返回子字符串在字符串中的位置   INSTR(str,...</div></div></div></a><a class="pagination-related" href="/2025/11/09/MySQL7/" title="MySQL 存储引擎"><img class="cover" src="/img/13.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-09</div><div class="info-item-2">MySQL 存储引擎</div></div><div class="info-2"><div class="info-item-1">MySQL 体系结构图 客户端连接器：Native C API、JDBC、ODBC、.NET、PHP、Python、Ruby、Cobol 等 MySQL 服务端： 连接层：连接池 服务层：SQL 接口、解析器、查询优化器、缓存 引擎层：可插拔存储引擎 存储层：数据文件、索引文件、数据结构、数据结构描述文件    存储引擎简介存储引擎是 MySQL 数据库管理系统中的核心部分，负责处理数据存储和检索。存储引擎提供了一种机制，将数据存储在数据库管理系统中，并允许用户使用各种查询语句来检索数据。存储引擎是基于表的，而不是库，所以同一个库中的不同表可以有不同的存储引擎。  查看数据库支持的存储引擎  SHOW ENGINES;   设置存储引擎  CREATE TABLE table_name (……) ENGINE&#x3D;[存储引擎名];    123456789101112131415161718192021-- 查看建表语句-- ENGINE=InnoDB 默认存储引擎为 InnoDBSHOW CREATE TABLE account;--...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Code Dog</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87"><span class="toc-number">1.</span> <span class="toc-text">索引前置准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.1.</span> <span class="toc-text">Linux 服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-%E5%AE%89%E8%A3%85-Mysql"><span class="toc-number">1.2.</span> <span class="toc-text">Linux 安装 Mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E4%B8%8D%E4%B8%8A%E5%8E%9F%E5%9B%A0"><span class="toc-number">1.3.</span> <span class="toc-text">连接不上原因</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E6%A6%82%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text">索引概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E6%97%A0%E7%B4%A2%E5%BC%95"><span class="toc-number">2.1.</span> <span class="toc-text">有无索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">2.2.</span> <span class="toc-text">优缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">索引结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#B-%E6%A0%91%E7%B4%A2%E5%BC%95"><span class="toc-number">3.1.</span> <span class="toc-text">B+树索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hash-%E7%B4%A2%E5%BC%95"><span class="toc-number">3.2.</span> <span class="toc-text">Hash 索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-InnoDB-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E4%BD%BF%E7%94%A8-B-%E6%A0%91%E7%B4%A2%E5%BC%95"><span class="toc-number">3.3.</span> <span class="toc-text">为什么 InnoDB 存储引擎使用 B+树索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">索引的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">4.1.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E9%9B%86%E7%B4%A2%E5%BC%95%E5%92%8C%E9%9D%9E%E8%81%9A%E9%9B%86%E7%B4%A2%E5%BC%95"><span class="toc-number">4.2.</span> <span class="toc-text">聚集索引和非聚集索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E8%A1%A8"><span class="toc-number">4.3.</span> <span class="toc-text">回表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">4.4.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E8%AF%AD%E6%B3%95"><span class="toc-number">5.</span> <span class="toc-text">索引语法</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/11/11/MySQL8/" title="MySQL 索引"><img src="/img/01.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 索引"/></a><div class="content"><a class="title" href="/2025/11/11/MySQL8/" title="MySQL 索引">MySQL 索引</a><time datetime="2025-11-11T15:37:21.000Z" title="发表于 2025-11-11 23:37:21">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/09/MySQL7/" title="MySQL 存储引擎"><img src="/img/13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 存储引擎"/></a><div class="content"><a class="title" href="/2025/11/09/MySQL7/" title="MySQL 存储引擎">MySQL 存储引擎</a><time datetime="2025-11-09T15:05:41.000Z" title="发表于 2025-11-09 23:05:41">2025-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/09/MySQL6/" title="MySQL 事务"><img src="/img/02.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 事务"/></a><div class="content"><a class="title" href="/2025/11/09/MySQL6/" title="MySQL 事务">MySQL 事务</a><time datetime="2025-11-09T12:30:13.000Z" title="发表于 2025-11-09 20:30:13">2025-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/07/MySQL5/" title="MySQL 多表查询"><img src="/img/04.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 多表查询"/></a><div class="content"><a class="title" href="/2025/11/07/MySQL5/" title="MySQL 多表查询">MySQL 多表查询</a><time datetime="2025-11-07T14:03:09.000Z" title="发表于 2025-11-07 22:03:09">2025-11-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/06/MySQL4/" title="MySQL 约束"><img src="/img/10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 约束"/></a><div class="content"><a class="title" href="/2025/11/06/MySQL4/" title="MySQL 约束">MySQL 约束</a><time datetime="2025-11-06T15:44:55.000Z" title="发表于 2025-11-06 23:44:55">2025-11-06</time></div></div></div></div></div></div></main><footer id="footer" style="background: ture;"><div id="footer-wrap"><div class="copyright">&copy;2025 By Code Dog</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false 
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>