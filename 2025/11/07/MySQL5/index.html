<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MySQL 多表查询 | 代码狗的小屋</title><meta name="author" content="Code Dog"><meta name="copyright" content="Code Dog"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="多表关系在实际开发中，每个表之间都存在一些关系，基本上分为三种：一对一、一对多(多对一)、多对多。 一对一一对一关系，比如：学生表和档案表，对于学生来说，一个学生只能拥有一份档案，而档案只能属于一个学生，这就是一对一。 12345678910111213CREATE TABLE student (    id   INT PRIMARY KEY AUTO_INCREMENT COMMENT &amp;#x">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 多表查询">
<meta property="og:url" content="https://codedog1024.github.io/2025/11/07/MySQL5/index.html">
<meta property="og:site_name" content="代码狗的小屋">
<meta property="og:description" content="多表关系在实际开发中，每个表之间都存在一些关系，基本上分为三种：一对一、一对多(多对一)、多对多。 一对一一对一关系，比如：学生表和档案表，对于学生来说，一个学生只能拥有一份档案，而档案只能属于一个学生，这就是一对一。 12345678910111213CREATE TABLE student (    id   INT PRIMARY KEY AUTO_INCREMENT COMMENT &amp;#x">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://codedog1024.github.io/img/03.jpg">
<meta property="article:published_time" content="2025-11-07T14:03:09.000Z">
<meta property="article:modified_time" content="2025-11-09T12:36:36.167Z">
<meta property="article:author" content="Code Dog">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://codedog1024.github.io/img/03.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "MySQL 多表查询",
  "url": "https://codedog1024.github.io/2025/11/07/MySQL5/",
  "image": "https://codedog1024.github.io/img/03.jpg",
  "datePublished": "2025-11-07T14:03:09.000Z",
  "dateModified": "2025-11-09T12:36:36.167Z",
  "author": [
    {
      "@type": "Person",
      "name": "Code Dog",
      "url": "https://codedog1024.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://codedog1024.github.io/2025/11/07/MySQL5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 1
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL 多表查询',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/03.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">代码狗的小屋</span></a><a class="nav-page-title" href="/"><span class="site-name">MySQL 多表查询</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">MySQL 多表查询</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-11-07T14:03:09.000Z" title="发表于 2025-11-07 22:03:09">2025-11-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-09T12:36:36.167Z" title="更新于 2025-11-09 20:36:36">2025-11-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h2><p>在实际开发中，每个表之间都存在一些关系，基本上分为三种：一对一、一对多(多对一)、多对多。</p>
<h3 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h3><p>一对一关系，比如：<code>学生表</code>和<code>档案表</code>，对于学生来说，一个学生只能拥有一份档案，而档案只能属于一个学生，这就是<code>一对一</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> student (</span><br><span class="line">    id   <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span></span><br><span class="line">) COMMENT <span class="string">&#x27;学生表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> profile (</span><br><span class="line">    id   <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    phone <span class="type">CHAR</span>(<span class="number">11</span>) <span class="keyword">UNIQUE</span> COMMENT <span class="string">&#x27;电话号&#x27;</span>,</span><br><span class="line">    address <span class="type">VARCHAR</span>(<span class="number">100</span>) COMMENT <span class="string">&#x27;家庭住址&#x27;</span>,</span><br><span class="line">    <span class="comment">-- 一份档案之能属于一个学生，所以必须添加 UNIQUE 关键字</span></span><br><span class="line">    student_id <span class="type">INT</span> <span class="keyword">UNIQUE</span> COMMENT <span class="string">&#x27;学生ID&#x27;</span>,</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_student_id <span class="keyword">FOREIGN KEY</span> (student_id) <span class="keyword">REFERENCES</span> student (id)</span><br><span class="line">) COMMENT <span class="string">&#x27;档案表&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="一对多-多对一"><a href="#一对多-多对一" class="headerlink" title="一对多(多对一)"></a>一对多(多对一)</h3><p>一对多关系，比如：<code>学生表</code>和<code>班级表</code>，对于学生来说，一个学生只能属于一个班级，而班级可以有多个学生，这就是<code>一对多</code>。反过来站在班级这个角度看，一个班级可以有多个学生，但一个学生只能属于一个班级，这就是<code>多对一</code>。</p>
<p>在建表时，需要在<code>多</code>的这一方添加外键，用来保存<code>一</code>的这一方的主键。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 学生表(多)</span></span><br><span class="line"><span class="comment">-- student: id, name, class_id</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 班级表(一)</span></span><br><span class="line"><span class="comment">-- class: id, name</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> student</span><br><span class="line">(</span><br><span class="line">    id       <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    name     <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    class_id <span class="type">INT</span> COMMENT <span class="string">&#x27;班级ID&#x27;</span>，</span><br><span class="line">    <span class="comment">-- 添加外键</span></span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_class_id <span class="keyword">FOREIGN KEY</span> (class_id) <span class="keyword">REFERENCES</span> class (id)</span><br><span class="line">) COMMENT <span class="string">&#x27;学生表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> class</span><br><span class="line">(</span><br><span class="line">    id   <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;班级名&#x27;</span></span><br><span class="line">) COMMENT <span class="string">&#x27;班级表&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h3><p>多对多关系：比如：<code>老师表</code>和<code>班级表</code>，对于老师来说，一个老师可以教多个班级，而班级也可以有多个老师，这就是<code>多对多</code>。</p>
<p>在建表时，需要额外创建一张<code>中间表</code>，该表拥有自己的主键，和这两张表的外键，用来保存两方的主键。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 教师表(多)</span></span><br><span class="line"><span class="comment">-- teacher: id, name</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 班级表(多)</span></span><br><span class="line"><span class="comment">-- class: id, name</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 教师班级中间表</span></span><br><span class="line"><span class="comment">-- teacher_class: id, teacher_id, class_id</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> teacher</span><br><span class="line">(</span><br><span class="line">    id   <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;教师ID&#x27;</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">10</span>) COMMENT <span class="string">&#x27;教师姓名&#x27;</span></span><br><span class="line">) COMMENT <span class="string">&#x27;教师表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> class</span><br><span class="line">(</span><br><span class="line">    id   <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;班级ID&#x27;</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">10</span>) COMMENT <span class="string">&#x27;班级名&#x27;</span></span><br><span class="line">) COMMENT <span class="string">&#x27;班级表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> teacher(name)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;张老师&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;李老师&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;王老师&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;赵老师&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;周老师&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> class(name)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;一班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;二班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;三班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;四班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;五班&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> teacher_class</span><br><span class="line">(</span><br><span class="line">    id         <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;中间表ID&#x27;</span>,</span><br><span class="line">    teacher_id <span class="type">INT</span> COMMENT <span class="string">&#x27;教师ID&#x27;</span>,</span><br><span class="line">    class_id   <span class="type">INT</span> COMMENT <span class="string">&#x27;班级ID&#x27;</span>,</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_teacher_id <span class="keyword">FOREIGN KEY</span> (teacher_id) <span class="keyword">REFERENCES</span> teacher (id),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_class_id <span class="keyword">FOREIGN KEY</span> (class_id) <span class="keyword">REFERENCES</span> class (id)</span><br><span class="line">) COMMENT <span class="string">&#x27;教师班级中间表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> teacher_class(teacher_id, class_id)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="number">1</span>),</span><br><span class="line">       (<span class="number">2</span>, <span class="number">1</span>),</span><br><span class="line">       (<span class="number">3</span>, <span class="number">2</span>),</span><br><span class="line">       (<span class="number">4</span>, <span class="number">2</span>),</span><br><span class="line">       (<span class="number">5</span>, <span class="number">3</span>),</span><br><span class="line">       (<span class="number">1</span>, <span class="number">3</span>),</span><br><span class="line">       (<span class="number">2</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><ol>
<li><p>直接查询，默认做<code>笛卡尔积</code>，会展示出两个表中所有数据的组合。</p>
<blockquote>
<p>SELECT * FROM student, class;</p>
</blockquote>
</li>
<li><p>根据外键查询，消除无效的数据</p>
<blockquote>
<p>SELECT * FROM student WHERE student.class_id &#x3D; class.id;</p>
</blockquote>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> class</span><br><span class="line">(</span><br><span class="line">    id   <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;班级名&#x27;</span></span><br><span class="line">) COMMENT <span class="string">&#x27;班级表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> student</span><br><span class="line">(</span><br><span class="line">    id       <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    name     <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    class_id <span class="type">INT</span> COMMENT <span class="string">&#x27;班级ID&#x27;</span>,</span><br><span class="line">    <span class="comment">-- 添加外键</span></span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_class_id <span class="keyword">FOREIGN KEY</span> (class_id) <span class="keyword">REFERENCES</span> class (id)</span><br><span class="line">) COMMENT <span class="string">&#x27;学生表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> class(name)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;一班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;二班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;三班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;四班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;五班&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> student(name, class_id)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;李白飞&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       (<span class="string">&#x27;孔勇&#x27;</span>, <span class="number">2</span>),</span><br><span class="line">       (<span class="string">&#x27;韩芬怡&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       (<span class="string">&#x27;薛云&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">       (<span class="string">&#x27;阎菊媛&#x27;</span>, <span class="number">5</span>),</span><br><span class="line">       (<span class="string">&#x27;郝凤嘉&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       (<span class="string">&#x27;蔡彪坚&#x27;</span>, <span class="number">2</span>),</span><br><span class="line">       (<span class="string">&#x27;史世&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       (<span class="string">&#x27;杜德&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">       (<span class="string">&#x27;余东&#x27;</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 直接查询两个表的数据，不加任何条件，默认做笛卡尔积，五个班级，10个人，一共 5 * 10 = 50 条数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student,</span><br><span class="line">     class;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用外键，消除无效的数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student,</span><br><span class="line">     class</span><br><span class="line"><span class="keyword">WHERE</span> student.class_id <span class="operator">=</span> class.id;</span><br></pre></td></tr></table></figure>

<h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><p>连接查询：查询两个表共有的数据</p>
<table>
<thead>
<tr>
<th>连接类型</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>内连接</td>
<td>查询两个表共有的数据</td>
</tr>
<tr>
<td>左外连接</td>
<td>查询左表所有数据，右表有数据则显示，没有则显示 NULL</td>
</tr>
<tr>
<td>右外连接</td>
<td>查询右表所有数据，左表有数据则显示，没有则显示 NULL</td>
</tr>
<tr>
<td>自连接</td>
<td>查询自己表中的数据，并且和自身进行比较</td>
</tr>
</tbody></table>
<h2 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h2><p>内连接：查询两个表共有的数据</p>
<h3 id="隐式连接"><a href="#隐式连接" class="headerlink" title="隐式连接"></a>隐式连接</h3><blockquote>
<p>SELECT 字段列表 FROM 表1, 表2 WHERE 连接条件&#x2F;筛选条件;</p>
</blockquote>
<h3 id="显式连接"><a href="#显式连接" class="headerlink" title="显式连接"></a>显式连接</h3><blockquote>
<p>SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 筛选条件 WHERE 筛选条件;</p>
</blockquote>
<h3 id="内连接示例"><a href="#内连接示例" class="headerlink" title="内连接示例"></a>内连接示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 查询所有学生的姓名和班级名称</span></span><br><span class="line"><span class="comment">-- 隐式连接</span></span><br><span class="line"><span class="keyword">SELECT</span> student.name, class.name</span><br><span class="line"><span class="keyword">FROM</span> student,</span><br><span class="line">     class</span><br><span class="line"><span class="keyword">WHERE</span> student.class_id <span class="operator">=</span> class.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显式连接</span></span><br><span class="line"><span class="keyword">SELECT</span> student.name, class.name</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> class <span class="keyword">ON</span> student.class_id <span class="operator">=</span> class.id;</span><br></pre></td></tr></table></figure>

<h2 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h2><h3 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h3><p>左外连接：查询左表所有数据，右表有数据则显示，没有则显示 NULL</p>
<blockquote>
<p>SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 筛选条件 WHERE 筛选条件;</p>
</blockquote>
<h3 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h3><p>右外连接：查询右表所有数据，左表有数据则显示，没有则显示 NULL</p>
<blockquote>
<p>SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 筛选条件 WHERE 筛选条件;</p>
</blockquote>
<h3 id="外连接示例"><a href="#外连接示例" class="headerlink" title="外连接示例"></a>外连接示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> class(name)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;一班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;二班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;三班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;四班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;五班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;六班&#x27;</span>),</span><br><span class="line">       (<span class="string">&#x27;七班&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> student(name, class_id)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;李白飞&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       (<span class="string">&#x27;孔勇&#x27;</span>, <span class="number">2</span>),</span><br><span class="line">       (<span class="string">&#x27;韩芬怡&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">       (<span class="string">&#x27;薛云&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">       (<span class="string">&#x27;阎菊媛&#x27;</span>, <span class="number">5</span>),</span><br><span class="line">       (<span class="string">&#x27;郝凤嘉&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">       (<span class="string">&#x27;蔡彪坚&#x27;</span>, <span class="number">2</span>),</span><br><span class="line">       (<span class="string">&#x27;史世&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">       (<span class="string">&#x27;杜德&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">       (<span class="string">&#x27;余东&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1. 使用内连接查询</span></span><br><span class="line"><span class="comment">-- 因为 史世 和 余东 的 class_id 为 NULL，所以使用 内连接 查询时，他们俩人的信息并不会被检索出来</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line">         <span class="keyword">JOIN</span> class <span class="keyword">ON</span> class_id <span class="operator">=</span> class.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 使用外连接查询</span></span><br><span class="line"><span class="comment">-- 左外连接会查询出 主表 的全部数据</span></span><br><span class="line"><span class="comment">-- 若右表有满足条件的数据则显示，没有则显示 NULL</span></span><br><span class="line"><span class="comment">-- 因此 史世 和 余东 两个人会查出，但是他们的 class_id、class.id、class.name 都是 NULL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line">         <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> class <span class="keyword">ON</span> class_id <span class="operator">=</span> class.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右外连接会查询出 右表 的全部数据</span></span><br><span class="line"><span class="comment">-- 若主表有满足条件的数据则显示，没有则显示 NULL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line">         <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> class <span class="keyword">ON</span> class_id <span class="operator">=</span> class.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右连接可以改成左连接</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> class</span><br><span class="line">         <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> student <span class="keyword">ON</span> class_id <span class="operator">=</span> class.id;</span><br></pre></td></tr></table></figure>

<h2 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h2><p>自连接：查询自己表中的数据，并且和自身进行比较</p>
<blockquote>
<p>SELECT 字段列表 FROM 表1 AS 别名1 JOIN 表1 AS 别名2 ON 筛选条件 WHERE 筛选条件;</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> employee</span><br><span class="line">(</span><br><span class="line">    id        <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    name      <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">UNIQUE</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    leader_id <span class="type">INT</span> COMMENT <span class="string">&#x27;领导ID&#x27;</span></span><br><span class="line">) COMMENT <span class="string">&#x27;员工表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> employee(name, leader_id)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;李白飞&#x27;</span>, <span class="number">8</span>),</span><br><span class="line">       (<span class="string">&#x27;孔勇&#x27;</span>, <span class="number">10</span>),</span><br><span class="line">       (<span class="string">&#x27;韩芬怡&#x27;</span>, <span class="number">8</span>),</span><br><span class="line">       (<span class="string">&#x27;薛云&#x27;</span>, <span class="number">10</span>),</span><br><span class="line">       (<span class="string">&#x27;阎菊媛&#x27;</span>, <span class="number">8</span>),</span><br><span class="line">       (<span class="string">&#x27;郝凤嘉&#x27;</span>, <span class="number">10</span>),</span><br><span class="line">       (<span class="string">&#x27;蔡彪坚&#x27;</span>, <span class="number">8</span>),</span><br><span class="line">       (<span class="string">&#x27;史世&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">       (<span class="string">&#x27;杜德&#x27;</span>, <span class="number">10</span>),</span><br><span class="line">       (<span class="string">&#x27;余东&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1. 查询全部员工和他对应的 leader 名</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.name, e2.name</span><br><span class="line"><span class="keyword">FROM</span> employee e1</span><br><span class="line">         <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employee e2 <span class="keyword">ON</span> e1.leader_id <span class="operator">=</span> e2.id;</span><br></pre></td></tr></table></figure>

<h2 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h2><p>联合查询：将多次查询的结果进行合并，关键字：<code>UNION</code> 、 <code>UNION ALL</code></p>
<blockquote>
<p>查询语句1 UNION [ALL] 查询语句2;</p>
</blockquote>
<p>查询语句1 和 查询语句2 的结果集必须相同，即<code>字段个数相同</code>，<code>字段类型相同</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 查询出 年龄 低于 24 的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&lt;</span> <span class="number">24</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 查询 薪资 低于 5000 的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 查询出 年龄 低于 24 和 薪资 低于 5000 的员工</span></span><br><span class="line"><span class="comment">-- UNION ALL 将两次查询结果直接合并会有重复的部分</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&lt;</span> <span class="number">24</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- UNION 将两次查询结果合并后去重</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&lt;</span> <span class="number">24</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> <span class="number">5000</span>;</span><br></pre></td></tr></table></figure>

<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>子查询：嵌套查询，嵌套查询的查询结果作为外查询的筛选条件</p>
<p>根据子查询的结果，可将子查询分为三类：</p>
<ol>
<li>标量子查询：即子查询的返回结果为<code>一个值</code></li>
<li>列子查询：即子查询的返回结果为<code>一列</code></li>
<li>行子查询：即子查询的返回结果为<code>一行</code></li>
<li>表子查询：即子查询的返回结果为<code>一个表（多行多列）</code></li>
</ol>
<h3 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 查询 一班 的全部学生</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> class_id <span class="operator">=</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> class <span class="keyword">WHERE</span> class.name <span class="operator">=</span> <span class="string">&#x27;一班&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 查询比平均薪资低的所有员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employee);</span><br></pre></td></tr></table></figure>

<h3 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h3><table>
<thead>
<tr>
<th align="left">操作符</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">IN</td>
<td align="left">IN 运算符用于判断某个值是否在指定的列表中。</td>
</tr>
<tr>
<td align="left">NOT IN</td>
<td align="left">NOT IN 运算符用于判断某个值是否不在指定的列表中。</td>
</tr>
<tr>
<td align="left">ANY</td>
<td align="left">ANY 运算符用于判断某个值是否满足给定条件的任意一个值。</td>
</tr>
<tr>
<td align="left">SOME</td>
<td align="left">SOME 运算符用于判断某个值是否满足给定条件的任意一个值。</td>
</tr>
<tr>
<td align="left">ALL</td>
<td align="left">ALL 运算符用于判断某个值是否满足给定条件的所有值。</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 查询 市场部 和 营业部 的全体员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> department <span class="keyword">WHERE</span> department.name <span class="keyword">IN</span> (<span class="string">&#x27;市场部&#x27;</span>, <span class="string">&#x27;营业部&#x27;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 查询出薪资比 技术部 全体员工都高的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="keyword">ALL</span> (<span class="keyword">SELECT</span> salary</span><br><span class="line">                    <span class="keyword">FROM</span> employee</span><br><span class="line">                    <span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> department.id <span class="keyword">FROM</span> department <span class="keyword">WHERE</span> department.name <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 查询出薪资比 技术部 任意员工高的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="keyword">SOME</span> (<span class="keyword">SELECT</span> salary</span><br><span class="line">                    <span class="keyword">FROM</span> employee</span><br><span class="line">                    <span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> department.id <span class="keyword">FROM</span> department <span class="keyword">WHERE</span> department.name <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ANY 效果同 SOME</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="keyword">ANY</span> (<span class="keyword">SELECT</span> salary</span><br><span class="line">                    <span class="keyword">FROM</span> employee</span><br><span class="line">                    <span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> department.id <span class="keyword">FROM</span> department <span class="keyword">WHERE</span> department.name <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询出和 李白飞 相同领导，相同薪资的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> (salary, leader_id) <span class="operator">=</span> (<span class="keyword">SELECT</span> salary, leader_id <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;李白飞&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="表子查询"><a href="#表子查询" class="headerlink" title="表子查询"></a>表子查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 查询出与 薛云 和 韩芬怡 两个人相同部门，相同薪资的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> (salary, department_id) <span class="keyword">IN</span> (<span class="keyword">SELECT</span> salary, department_id <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;薛云&#x27;</span> <span class="keyword">OR</span> name <span class="operator">=</span> <span class="string">&#x27;韩芬怡&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 查询入职时间在 2025-10-02 之后入职的员工及其部门名</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> join_date <span class="operator">&gt;</span> <span class="string">&#x27;2025-10-02&#x27;</span>) <span class="keyword">AS</span> e1</span><br><span class="line">         <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> department <span class="keyword">ON</span> e1.department_id <span class="operator">=</span> department.id;</span><br></pre></td></tr></table></figure>

<h2 id="综合练习"><a href="#综合练习" class="headerlink" title="综合练习"></a>综合练习</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 查询员工的姓名、年龄、职位、部门信息</span></span><br><span class="line"><span class="keyword">SELECT</span> employee.name, employee.age, employee.job, department.name</span><br><span class="line"><span class="keyword">FROM</span> employee,</span><br><span class="line">     department</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> department.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 查询年龄小于 24 的员工的姓名、年龄、职位、部门信息(没有部门就不查询出来)</span></span><br><span class="line"><span class="keyword">SELECT</span> employee.name, employee.age, employee.job, department.name</span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line">         <span class="keyword">INNER</span> <span class="keyword">JOIN</span> department</span><br><span class="line">                    <span class="keyword">ON</span> department_id <span class="operator">=</span> department.id</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&lt;</span> <span class="number">24</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 查询部门信息（该部门下必须有员工）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> department</span><br><span class="line"><span class="keyword">WHERE</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(department_id) <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> department_id <span class="operator">=</span> department.id <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id) <span class="operator">&gt;</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4. 查询年龄小于 24 的员工的姓名、年龄、职位、部门信息(没有部门也要查询出来)</span></span><br><span class="line"><span class="keyword">SELECT</span> employee.name, employee.age, employee.job, department.name</span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line">         <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> department</span><br><span class="line">                         <span class="keyword">ON</span> department_id <span class="operator">=</span> department.id</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&lt;</span> <span class="number">24</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5. 查询所有员工的薪资等级</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary, grade, min, max</span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line">         <span class="keyword">INNER</span> <span class="keyword">JOIN</span> salary_grade <span class="keyword">ON</span> salary <span class="keyword">BETWEEN</span> min <span class="keyword">AND</span> max;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6. 查询技术部员工的薪资等级</span></span><br><span class="line"><span class="keyword">SELECT</span> employee.name, salary, department.name, grade, min, max</span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line">         <span class="keyword">INNER</span> <span class="keyword">JOIN</span> department <span class="keyword">ON</span> department_id <span class="operator">=</span> department.id <span class="keyword">AND</span> department.name <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span></span><br><span class="line">         <span class="keyword">INNER</span> <span class="keyword">JOIN</span> salary_grade <span class="keyword">ON</span> salary <span class="keyword">BETWEEN</span> min <span class="keyword">AND</span> max;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7. 查询技术部员工的平均薪资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(employee.salary)</span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line">         <span class="keyword">INNER</span> <span class="keyword">JOIN</span> department <span class="keyword">ON</span> department_id <span class="operator">=</span> department.id <span class="keyword">AND</span> department.name <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8. 查询出薪资比 孔勇 高的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee e1</span><br><span class="line"><span class="keyword">WHERE</span> e1.salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> e2.salary <span class="keyword">FROM</span> employee e2 <span class="keyword">WHERE</span> e2.name <span class="operator">=</span> <span class="string">&#x27;孔勇&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9. 查询出比平均薪资高的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee e1</span><br><span class="line"><span class="keyword">WHERE</span> e1.salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(e2.salary) <span class="keyword">FROM</span> employee e2);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10. 查询出低于本部门平均工资的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employee e1</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employee e2 <span class="keyword">WHERE</span> e2.department_id <span class="operator">=</span> e1.department_id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 11. 查询部门信息以及部门人数</span></span><br><span class="line"><span class="keyword">SELECT</span> d1.<span class="operator">*</span>, <span class="built_in">COUNT</span>(e1.id)</span><br><span class="line"><span class="keyword">FROM</span> department d1</span><br><span class="line">         <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> employee e1 <span class="keyword">ON</span> d1.id <span class="operator">=</span> e1.department_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d1.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 12. 查询出所有老师的课程情况</span></span><br><span class="line"><span class="keyword">SELECT</span> teacher.name, class.name</span><br><span class="line"><span class="keyword">FROM</span> teacher_class</span><br><span class="line">         <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> teacher <span class="keyword">ON</span> teacher_class.teacher_id <span class="operator">=</span> teacher.id</span><br><span class="line">         <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> class <span class="keyword">ON</span> teacher_class.class_id <span class="operator">=</span> class.id;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://codedog1024.github.io">Code Dog</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://codedog1024.github.io/2025/11/07/MySQL5/">https://codedog1024.github.io/2025/11/07/MySQL5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://codedog1024.github.io" target="_blank">代码狗的小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post-share"><div class="social-share" data-image="/img/03.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/11/06/MySQL4/" title="MySQL 约束"><img class="cover" src="/img/09.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">MySQL 约束</div></div><div class="info-2"><div class="info-item-1">约束约束：作用在表中的字段上，保证字段的数据满足要求，用于保证数据的正确型、有效性、安全性。 分类   约束 作用 关键字    主键 该值必须唯一、不重复、不能为 NULL PRIMARY KEY   外键 该值必须在指定表中存在 FOREIGN KEY   唯一 该值必须唯一、不重复 UNIQUE   非空 该值不能为空 NOT NULL   默认值 若为指定该值，则使用默认值 DEFAULT   检查 检查字段的值 CHECK   约束代码示例123456789101112CREATE TABLE users (    -- 主键，并且自增    id INT PRIMARY KEY AUTO_INCREMENT COMMENT &#x27;ID&#x27;,    -- 唯一，并且不能为空    name VARCHAR(10) NOT NULL UNIQUE COMMENT &#x27;姓名&#x27;,    -- 检查，年龄必须大于 0 且小于 120    age INT CHECK ( age &gt; 0 AND age &lt; 120) COMMENT...</div></div></div></a><a class="pagination-related" href="/2025/11/09/MySQL6/" title="MySQL 事务"><img class="cover" src="/img/12.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MySQL 事务</div></div><div class="info-2"><div class="info-item-1">事务事务：事务是一组操作的集合，该集合中的所有操作被视为一个整体，要么全部执行成功，要么全部执行失败。若任意一个操作执行失败，则事务回滚，所有操作全部撤销。 MySQL 中默认开启事务，但是该事务只是针对一条 SQL 语句，而不是一组。如果想要给一组 SQL 语句开启事务，则需要手动编写 SQL 语句，使用 BEGIN 开启事务，使用 COMMIT 提交事务，使用 ROLLBACK 回滚事务。 事务的操作   操作 描述    SELECT @@AUTOCOMMIT; 查看当前数据库是否自动提交，1 表示自动提交，0 表示手动提交   SET AUTOCOMMIT &#x3D; 0 &#x2F; 1; 关闭  &#x2F; 开启自动提交   BEGIN; &#x2F; START TRANSACTION; 开启事务   COMMIT; 提交事务   ROLLBACK; 回滚事务   1234567891011121314151617181920212223242526272829CREATE TABLE account(    id    INT PRIMARY KEY...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/10/29/MySQL1/" title="MySQL 概述"><img class="cover" src="/img/03.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-29</div><div class="info-item-2">MySQL 概述</div></div><div class="info-2"><div class="info-item-1">概述数据库：数据库就是一个仓库，将数据进行有组织的存储管理。 MySQL: 是一个关系型数据库管理系统（Relational Database Management System，RDBMS），MySQL 并不是数据库。 SQL：SQL是Structured Query Language的缩写，是一种数据库查询和程序设计语言。我们需要通过编写 SQL 语句来操作数据库。 数据库分类   数据库 类型    Oracle 关系型数据库   MySQL 关系型数据库   SQL Server 关系型数据库   PostgreSQL 关系型数据库   IBM DB2 关系型数据库   SQLite 关系型数据库   MongoDB 非关系型数据库   Microsoft Azure SQL Database 关系型数据库   Hive 关系型数据库   下载安装 MySQL社区版 下载地址 启动、停止 启动命令：net start 服务名 停止命令：net stop 服务名  连接 使用 MySQL 提供的命令行工具 使用 windows 终端，执行 MySQL [-h...</div></div></div></a><a class="pagination-related" href="/2025/10/29/MySQL2/" title="MySQL SQL"><img class="cover" src="/img/13.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-29</div><div class="info-item-2">MySQL SQL</div></div><div class="info-2"><div class="info-item-1">SQL 通用语法 SQL 语句可以单行或多行编写，以分号结尾。 SQL 中应使用空格来格式化语句，提高可读性。 SQL 语句大小写不敏感，但建议使用大写。 注释： 单行注释：--、# 多行注释：/* */    SQL 分类   分类 全称 描述    DDL Data Definition Language 数据定义语言，用于定义数据库对象，如表、索引、视图、存储过程、函数等   DML Data Manipulation Language 数据操作语言，用于对数据库中的数据进行增删改   DQL Data Query Language 数据查询语言，用于查询数据库中的数据   DCL Data Control Language 数据控制语言，用于控制数据库的访问权限   DDL操作数据库   功能 SQL 语法 描述    查询 SHOW DATABASES; 查询全部数据库   查询 SELECT DATABASE(); 查询当前数据库   创建 CREATE DATABASE [IF NOT EXISTS] 数据库名 [DEFAULT CHARACTER SET...</div></div></div></a><a class="pagination-related" href="/2025/11/06/MySQL4/" title="MySQL 约束"><img class="cover" src="/img/09.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-06</div><div class="info-item-2">MySQL 约束</div></div><div class="info-2"><div class="info-item-1">约束约束：作用在表中的字段上，保证字段的数据满足要求，用于保证数据的正确型、有效性、安全性。 分类   约束 作用 关键字    主键 该值必须唯一、不重复、不能为 NULL PRIMARY KEY   外键 该值必须在指定表中存在 FOREIGN KEY   唯一 该值必须唯一、不重复 UNIQUE   非空 该值不能为空 NOT NULL   默认值 若为指定该值，则使用默认值 DEFAULT   检查 检查字段的值 CHECK   约束代码示例123456789101112CREATE TABLE users (    -- 主键，并且自增    id INT PRIMARY KEY AUTO_INCREMENT COMMENT &#x27;ID&#x27;,    -- 唯一，并且不能为空    name VARCHAR(10) NOT NULL UNIQUE COMMENT &#x27;姓名&#x27;,    -- 检查，年龄必须大于 0 且小于 120    age INT CHECK ( age &gt; 0 AND age &lt; 120) COMMENT...</div></div></div></a><a class="pagination-related" href="/2025/11/06/MySQL3/" title="MySQL 函数"><img class="cover" src="/img/10.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-06</div><div class="info-item-2">MySQL 函数</div></div><div class="info-2"><div class="info-item-1">函数函数是一段已经被编写好，可以直接使用的代码片段。MySQL 中内置了很多的函数，我们可以使用这些函数来完成一些简单的任务。 字符串函数常用字符串函数   函数 描述    CONCAT(str1, str2, …) 连接字符串   LOWER(str) 将字符串转换为小写   UPPER(str) 将字符串转换为大写   LPAD(str, len, pad_str) 左填充字符串   RPAD(str, len, pad_str) 右填充字符串   TRIM(str) 去掉字符串两侧的空格   SUBSTRING(str, start, len) 截取字符串   REPLACE(str, old_str, new_str) 替换字符串   LENGTH(str) 返回字符串的长度   LOCATE(substr, str) 返回子字符串在字符串中的位置   INSTR(str,...</div></div></div></a><a class="pagination-related" href="/2025/11/09/MySQL7/" title="MySQL 存储引擎"><img class="cover" src="/img/13.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-09</div><div class="info-item-2">MySQL 存储引擎</div></div><div class="info-2"><div class="info-item-1">MySQL 体系结构图 客户端连接器：Native C API、JDBC、ODBC、.NET、PHP、Python、Ruby、Cobol 等 MySQL 服务端： 连接层：连接池 服务层：SQL 接口、解析器、查询优化器、缓存 引擎层：可插拔存储引擎 存储层：数据文件、索引文件、数据结构、数据结构描述文件    存储引擎简介存储引擎是 MySQL 数据库管理系统中的核心部分，负责处理数据存储和检索。存储引擎提供了一种机制，将数据存储在数据库管理系统中，并允许用户使用各种查询语句来检索数据。存储引擎是基于表的，而不是库，所以同一个库中的不同表可以有不同的存储引擎。  查看数据库支持的存储引擎  SHOW ENGINES;   设置存储引擎  CREATE TABLE table_name (……) ENGINE&#x3D;[存储引擎名];    123456789101112131415161718192021-- 查看建表语句-- ENGINE=InnoDB 默认存储引擎为 InnoDBSHOW CREATE TABLE account;--...</div></div></div></a><a class="pagination-related" href="/2025/11/09/MySQL6/" title="MySQL 事务"><img class="cover" src="/img/12.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-09</div><div class="info-item-2">MySQL 事务</div></div><div class="info-2"><div class="info-item-1">事务事务：事务是一组操作的集合，该集合中的所有操作被视为一个整体，要么全部执行成功，要么全部执行失败。若任意一个操作执行失败，则事务回滚，所有操作全部撤销。 MySQL 中默认开启事务，但是该事务只是针对一条 SQL 语句，而不是一组。如果想要给一组 SQL 语句开启事务，则需要手动编写 SQL 语句，使用 BEGIN 开启事务，使用 COMMIT 提交事务，使用 ROLLBACK 回滚事务。 事务的操作   操作 描述    SELECT @@AUTOCOMMIT; 查看当前数据库是否自动提交，1 表示自动提交，0 表示手动提交   SET AUTOCOMMIT &#x3D; 0 &#x2F; 1; 关闭  &#x2F; 开启自动提交   BEGIN; &#x2F; START TRANSACTION; 开启事务   COMMIT; 提交事务   ROLLBACK; 回滚事务   1234567891011121314151617181920212223242526272829CREATE TABLE account(    id    INT PRIMARY KEY...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Code Dog</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">1.</span> <span class="toc-text">多表关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80"><span class="toc-number">1.1.</span> <span class="toc-text">一对一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A-%E5%A4%9A%E5%AF%B9%E4%B8%80"><span class="toc-number">1.2.</span> <span class="toc-text">一对多(多对一)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="toc-number">1.3.</span> <span class="toc-text">多对多</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.</span> <span class="toc-text">多表查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.</span> <span class="toc-text">连接查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.</span> <span class="toc-text">内连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.1.</span> <span class="toc-text">隐式连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.2.</span> <span class="toc-text">显式连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.3.</span> <span class="toc-text">内连接示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.</span> <span class="toc-text">外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.1.</span> <span class="toc-text">左外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.2.</span> <span class="toc-text">右外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5%E7%A4%BA%E4%BE%8B"><span class="toc-number">5.3.</span> <span class="toc-text">外连接示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.</span> <span class="toc-text">自连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">联合查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.1.</span> <span class="toc-text">标量子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.2.</span> <span class="toc-text">列子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.3.</span> <span class="toc-text">行子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.4.</span> <span class="toc-text">表子查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E7%BB%83%E4%B9%A0"><span class="toc-number">9.</span> <span class="toc-text">综合练习</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/11/25/MySQL10/" title="MySQL 视图/存储过程/触发器"><img src="/img/05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 视图/存储过程/触发器"/></a><div class="content"><a class="title" href="/2025/11/25/MySQL10/" title="MySQL 视图/存储过程/触发器">MySQL 视图/存储过程/触发器</a><time datetime="2025-11-25T14:32:08.000Z" title="发表于 2025-11-25 22:32:08">2025-11-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/24/MySQL9/" title="MySQL SQL 优化"><img src="/img/11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL SQL 优化"/></a><div class="content"><a class="title" href="/2025/11/24/MySQL9/" title="MySQL SQL 优化">MySQL SQL 优化</a><time datetime="2025-11-24T12:40:22.000Z" title="发表于 2025-11-24 20:40:22">2025-11-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/11/MySQL8/" title="MySQL 索引"><img src="/img/10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 索引"/></a><div class="content"><a class="title" href="/2025/11/11/MySQL8/" title="MySQL 索引">MySQL 索引</a><time datetime="2025-11-11T15:37:21.000Z" title="发表于 2025-11-11 23:37:21">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/09/MySQL7/" title="MySQL 存储引擎"><img src="/img/13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 存储引擎"/></a><div class="content"><a class="title" href="/2025/11/09/MySQL7/" title="MySQL 存储引擎">MySQL 存储引擎</a><time datetime="2025-11-09T15:05:41.000Z" title="发表于 2025-11-09 23:05:41">2025-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/09/MySQL6/" title="MySQL 事务"><img src="/img/12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 事务"/></a><div class="content"><a class="title" href="/2025/11/09/MySQL6/" title="MySQL 事务">MySQL 事务</a><time datetime="2025-11-09T12:30:13.000Z" title="发表于 2025-11-09 20:30:13">2025-11-09</time></div></div></div></div></div></div></main><footer id="footer" style="background: ture;"><div id="footer-wrap"><div class="copyright">&copy;2025 By Code Dog</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false 
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>